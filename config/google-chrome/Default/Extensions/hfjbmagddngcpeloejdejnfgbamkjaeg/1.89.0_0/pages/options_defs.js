__filename="pages/options_defs.js",define(["exports","./async_bg","./options_base"],function(t,i,n){"use strict";var s,u,e,r,h,o,f,c,a,l,d,v;n.Ds.Jo=Object.create(null),n.Ds.us=[],n.Ds.prototype.Js=function(t){t.call(this),window.VApi&&i.bs.mn(i.bs.un[this.Ns],this.gs(),VApi.z)},n.Ds.tu=function(){var t,i,s=n.Ds.Jo,u=[];for(t in s)!(i=s[t]).Os&&i.Ts()&&u.push(i.Ns);if(u.length>0&&!confirm(n.qs("dirtyOptions",[u.join("\n  * ")])))return false;for(t in s)if(!(i=s[t]).Os&&!i.Rs())return false;for(t in s.vimSync.Os||s.vimSync.js(),s.exclusionRules.Os||s.exclusionRules.js(),s)s[t].Os||s[t].js();return true},n.Ds.iu=function(){var t,i=n.Ds.Jo;for(t in i)if(!i[t].Os)return true;return false},n.Ds.prototype.u=function(t,i){return t===i},s=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.vr=function(){var t,s;this.$s={min:(t=this.$t.min)&&!isNaN(s=parseFloat(t))?s:null,max:(t=this.$t.max)&&!isNaN(s=parseFloat(t))?s:null,default:i.bs.sn[this.Ns],ws:n.nu},this.$t.oninput=this.ns,this.$t.onfocus=this.su.bind(this),this.$t.setAttribute("autocomplete","off")},n.prototype.fs=function(t){this.$t.value=""+t},n.prototype.gs=function(){return parseFloat(this.$t.value)},n.prototype.su=function(){var t=this,i=this.$t,n=function(i){return t.uu(i)},s=function(){i.removeEventListener("wheel",n,{passive:false}),i.removeEventListener("blur",s),t.eu=0};this.eu=0,i.addEventListener("wheel",n,{passive:false}),i.addEventListener("blur",s)},n.prototype.uu=function(t){var i,n,s,u,e,r,h,o;if(t.preventDefault(),i=this.eu,!((n=Date.now())-i<100&&n+99>i&&i))return this.eu=n,e=(s=this.$t).value,"function"==typeof(h=(u=(t.deltaY||t.deltaX)>0)?s.stepUp:s.stepDown)?(h.call(s),r=s.value,s.value=e):(o=(h=parseFloat)(s.step)||1,n=(+s.value||0)+(u?o:-o),isNaN(o=h(s.max))||(n=Math.min(n,o)),isNaN(o=h(s.min))||(n=Math.max(n,o)),r=""+n),this.ru(r,i>0,false)},n.nu=function(t){return isNaN(t)&&(t=this.default),t=null!=this.min?Math.max(this.min,t):t,null!=this.max?Math.min(this.max,t):t},n})(n.Ds),u=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.vr=function(){var t=this.$t,n=t.dataset.map;this.hu=n?JSON.parse(n):t.dataset.allowNull?i.ou:i.fu,this.cu=this.hu.length-1,this.cu>1&&"vimSync"!==this.Ns&&t.addEventListener("change",this.onTripleStatusesClicked.bind(this),true),t.onchange=this.ns},i.prototype.fs=function(t){var i=true===t||t===this.hu[this.cu];this.$t.checked=i,this.$t.indeterminate=this.cu>1&&t===this.hu[1],this.au=i?this.cu:Math.max(0,this.hu.indexOf(t))},i.prototype.gs=function(){return this.$t.indeterminate?this.hu[1]:this.hu[this.$t.checked?this.cu:0]},i.prototype.onTripleStatusesClicked=function(t){t.preventDefault();var i=this.au;this.au=2===i?1:i?0:2,this.$t.indeterminate=2===i,this.$t.checked=2===this.au},i.fu=[false,true],i.ou=[false,null,true],i})(n.Ds),e=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.vr=function(){var t=this.$t.dataset.converter||"",n=t?t.split(" "):[];this.$t.oninput=this.ns,n.length>0&&(this.$s={lu:n,Pr:0,ws:i.du}),this.$t.setAttribute("autocomplete","off")},i.prototype.ks=function(){t.prototype.ks.call(this);var i=this.$s;i&&(i.Pr=0,i.Pr=i.ws(this.Ss)===this.Ss?1:0)},i.prototype.fs=function(t,i){var n=t.replace(/ /g,"\xa0");true!==i?this.$t.value=n:this.ru(n,true,true)},i.prototype.vu=function(){return this.$t.value.trim().replace(/\xa0/g," ")},i.prototype.gs=function(){var t=this.vu(),n=this.$s;return t&&n&&n.ws===i.du&&(n.Pr|=2,t=n.ws(t),n.Pr&=-3),t},i.prototype.Ms=function(t){return t!==this.vu()},i.du=function(t){var i,n,s,u,e=this.lu;if(e.indexOf("lower")>=0?t=t.toUpperCase().toLowerCase():e.indexOf("upper")>=0&&(t=t.toLowerCase().toUpperCase()),t=t.normalize(),e.indexOf("chars")<0||2&this.Pr&&!(1&this.Pr))return t;for(i="",n=0,s=t.replace(/\s/g,"");n<s.length;n++)i.includes(u=s[n])||(i+=u);return i},i})(n.Ds),r=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.gs=function(){var n=t.prototype.gs.call(this);return n||this.fs(n=i.bs.sn[this.Ns],true),n},n})(e),h=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.pu=function(t){var i=this.$t instanceof HTMLInputElement,n=JSON.stringify(t,null,i?1:2);return i?n.replace(/(,?)\n\s*/g,function(t,i){return i?", ":""}):n},n.prototype.fs=function(i,n){t.prototype.fs.call(this,this.pu(i),n)},n.prototype.Ms=function(t){return this.pu(t)!==this.vu()},n.prototype.gs=function(){var n=t.prototype.gs.call(this),s=null;if(n)try{s=JSON.parse(n)}catch(t){}else this.fs(s=i.bs.sn[this.Ns],true);return s},n})(e),o=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.vr=function(){var t=this;this.mu=true,n.Bs(function(){t.$t.classList.add("masked")}),this.gu=this._u.bind(this),this.$t.addEventListener("focus",this.gu)},i.prototype._u=function(){this.gu&&(this.$t.removeEventListener("focus",this.gu),this.$t.classList.remove("masked"),this.gu=null,this.mu=false,this.$t.removeAttribute("placeholder"),this.ks())},i.prototype.fs=function(i,s){this.mu?this.$t.placeholder=n.qs("clickToUnmask"):t.prototype.fs.call(this,i,s)},i.prototype.gs=function(){return this.mu?this.Ss:t.prototype.gs.call(this)},i})(e),e.prototype.ru=s.prototype.ru=function(t,i,n){var s=false;i&&(this.bu=true,(s=document.activeElement!==this.$t)&&this.$t.focus(),document.execCommand("undo")),this.bu=n,this.$t.select(),document.execCommand("insertText",false,t),s&&this.$t.blur(),this.bu=false},e.prototype.Xs=function(t,i,s){var u,e,r,h,o;null!=s||(s=!!t),r=(e=this.$t).classList,h=e.parentElement,o=(o=(u=this.$t).nextElementSibling)&&o.classList.contains("tip")?o:null,n.Bs(function(){s?(null==o&&((o=document.createElement("div")).className="tip",h.insertBefore(o,u.nextElementSibling)),o.textContent=t,null!==i&&r.add(i||"has-error")):(r.remove("has-error"),r.remove("highlight"),o&&o.remove())})},h.prototype.u=n.Ds.p,n.Cs.prototype.hs=function(t){var i,s,u,e,r,h;if(this.gr.length===t)for(i=n.$("#exclusionToolbar"),s=n.$$("[data-model]",i),i.style.visibility=t?"":"hidden",u=0,e=s.length;u<e;u++)(h=(r=n.Ds.Jo[s[u].id]).$t.parentNode.style).visibility=t||r.Os?"":"visible",h.display=!t&&r.Os?"none":""},f=n.$("#saveOptions"),c=n.$("#exportButton"),t.savedStatus=void 0,t.registerClass=void 0,a=(function(){var i,a,l,d=false;return t.savedStatus=function(t){return d=null!=t?t:d},i=function(){this.bu||((this.Os=this.u(this.gs(),this.Ss))?d&&!n.Ds.iu()&&(f.disabled=true,f.firstChild.data=n.qs("o115"),c.disabled=false,t.savedStatus(false),window.onbeforeunload=null):d||(window.onbeforeunload=function(){return n.qs("beforeUnload")},t.savedStatus(true),f.disabled=false,f.firstChild.data=n.qs("o115_2"),c.disabled=true))},a={Number:s,Boolean:u,Text:e,NonEmptyText:r,JSON:h,MaskedText:o,ExclusionRules:n.Cs},l=function(t){var s=new(0,a[t.dataset.model])(t,i);return s.ks(),n.Ds.Jo[s.Ns]=s},[].forEach.call(n.$$("[data-model]"),l),t.registerClass=function(t,i){a[t]=i},l})(),n.Ds.Jo.exclusionRules.rs=function(){var t=this,i=t.ts;i.ondragstart=function(i){(t.xu=i.target).style.opacity="0.5"},i.ondragend=function(){var i=t.xu;t.xu=null,i&&(i.style.opacity="")},i.ondragover=function(t){t.preventDefault()},i.ondrop=function(i){var n,s,u,e,r;i.preventDefault(),n=t.xu,s=(s=i.target).closest(".exclusionRule"),n&&s&&n!==s&&(t.ts.insertBefore(n,s),u=t.gr,e=n.querySelector(".pattern").vnode,r=s.querySelector(".pattern").vnode,u.splice(u.indexOf(e),1),u.splice(u.indexOf(r),0,e),t.ns())}},n.Ds.Jo.keyMappings.xs=function(){var t,s,u=i.Ks.c,e=u.so,r=e?(function(t){var i,n,s,u,e=t.length>1?"Errors:\n":"Error: ";for(s=0,u=t;s<u.length;s++)i=0,e+=(n=u[s])[0].replace(/%([a-z])/g,function(t,s){return++i,"c"===s?"":"s"===s||"d"===s?n[i]:JSON.stringify(n[i])}),i+1<n.length&&(e+=" "+n.slice(i+1).map(function(t){return"object"==typeof t&&t?JSON.stringify(t):t}).join(" ")+".\n");return e})(e):"";i.bs.en.l&&!r&&(t=Object.keys(u.ut).join(""),t+=(s=u.vt)?Object.keys(s).join(""):"",/[^ -\xff]/.test(t))?this.Xs(n.qs("ignoredNonEN"),null):this.Xs(r)},v=n.Ds.Jo.filterLinkHints,(l=n.Ds.Jo.linkHintCharacters).xs=(d=n.Ds.Jo.linkHintNumbers).xs=function(){this.Xs(!this.$t.style.display&&this.Ss.length<4?n.qs("96"):"")},v.xs=function(){n.Bs(function(t){var i=v.gs();t.style.display=d.$t.style.display=i?"":"none",l.$t.style.display=i?"none":"",l.xs(),d.xs()},n.$("#waitForEnterBox"))},n.Ds.Jo.ignoreKeyboardLayout.xs=function(){var t=this;n.Bs(function(i){i.style.display=t.gs()>1?"none":""},n.$("#ignoreCapsLockBox"))},n.Ds.Jo.vomnibarPage.xs=function(){var t=this.$t,s=this.Ss,u=s.startsWith(location.protocol)||s.startsWith("front/");if(i.f<50)return n.Bs(function(){t.style.textDecoration=u?"":"line-through"}),this.Xs(s===i.bs.sn.vomnibarPage?"":n.qs("onlyExtVomnibar",[50]),null);if(s=i.bs.le.vomnibarPage_f||s,u);else{if(s.startsWith("file:"))return this.Xs(n.qs("fileVomnibar"),"highlight");if(/^http:\/\/(?!localhost[:/])/i.test(s))return this.Xs(n.qs("httpVomnibar"),"highlight")}return this.Xs("")},n.Ds.Jo.newTabUrl.$s={Pr:0,ws:function(t){var n=/^\/?pages\/[a-z]+.html\b/i.test(t)?chrome.runtime.getURL(t):i.Ks.r.K(t.toLowerCase());return n=n.split("?",1)[0].split("#",1)[0],t.startsWith("http")||!i.bs.U.has(n)&&!/^(?!http|ftp)[a-z\-]+:\/?\/?newtab\b\/?/i.test(t)?t:i.bs.sn.newTabUrl}},n.Ds.Jo.autoDarkMode.xs=function(){document.documentElement.classList.toggle("auto-dark",this.Ss)},n.Ds.Jo.autoReduceMotion.xs=function(){document.documentElement.classList.toggle("less-motion",this.Ss)},n.Ds.Jo.userDefinedCss.xs=function(){window.VApi&&VApi.z&&this.$t.classList.contains("debugging")&&setTimeout(function(){var t,i,s,u,e,r=VApi.y().r,h=n.$$("iframe",r);for(t=0,i=h.length;t<i;t++)u=(s=h[t]).classList.contains("HUD"),(e=s.contentDocument.querySelector("style.debugged"))&&(u?e.remove():e.classList.remove("debugged"));n.Ds.Jo.userDefinedCss.$t.classList.remove("debugging")},500)},t.Nu=u,t.wu=h,t.Ou=o,t.ku=r,t.yu=s,t.Eu=e,t.createNewOption=a,t.exportBtn=c,t.saveBtn=f,Object.defineProperty(t,"Fs",{value:true})});