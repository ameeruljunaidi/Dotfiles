"use strict";var VimiumInjector;(function(){var t,e,n,o=VimiumInjector,c={id:"",alive:-1,host:"",version:"",cache:null,clickable:void 0,reload:null,checkIfEnabled:null,$:null,$h:"",$m:null,$r:null,getCommandCount:null,callback:null,destroy:null};if(o)for(t=0,e=Object.keys(o);t<e.length;t++)c[n=e[t]]=o[n];c.alive=-1,VimiumInjector=c})(),(function(t,e){function n(t,n){var o,u,l,r,f,m,b,p,g,k,C,E,w,y,$=VimiumInjector,j=$&&$.clickable,L=$&&$.callback;if(t||(l=n&&n.message,r=a.id||location.host||location.protocol,u=!!(l&&l.lastIndexOf("not exist")>=0&&a.id),false===t?o=": not in the allow list.":!u&&n?o=l?":\n\t"+l:": no backend found.":h>3?(o=l?":\n\t"+l:": retried but failed ("+t+").",u=false):(setTimeout(c,200*h),h++,u=true),u||(o=o||" ("+h+" retries).",console.log("%cVimium C%c: %cfail%c to inject into %c%s%c %s","color:red","color:auto","color:red","color:auto","color:#0c85e9",r,"color:auto",o),L&&$.callback(-1,o))),$&&"function"==typeof $.destroy&&$.destroy(true),f=VimiumInjector={id:v,alive:0,host:i?t?t.host:"":v,version:t?t.version:"",cache:null,clickable:j,reload:e(d),checkIfEnabled:null,$:null,$h:t?t.h:"",$m:function(t){VimiumInjector&&VimiumInjector.$r("object"==typeof t?t.t:t)},$r:function(){},getCommandCount:null,callback:L||null,destroy:null},m=document.documentElement,!(t&&m instanceof HTMLHtmlElement))return n;for(p=(b=document.contains(s)?s:(document.head||m).lastChild).nextSibling,g=b.parentElement,k=[],C=0,E=t.s;C<E.length;C++)w=E[C],(y=document.createElement("script")).type="text/javascript",y.async=false,y.src=w,g.insertBefore(y,p),k.push(y);k.length>0&&(k[k.length-1].onload=function(){this.onload=null;for(var t=k.length;0<=--t;)k[t].remove()}),L&&f.callback(0,"loading")}function o(){removeEventListener("DOMContentLoaded",o),!u||m?m(function(){m(function(){setTimeout(c,0)},{timeout:67})},{timeout:330}):setTimeout(c,67)}var c,i=!!0,u=!!0,l=i&&"object"==typeof browser&&!("tagName"in browser)?browser:null,r=!!i&&!("object"==typeof chrome&&chrome&&chrome.runtime&&chrome.runtime.connect||!(l&&l.runtime&&l.runtime.connect)),a=(r?browser:chrome).runtime,s=document.currentScript,d=s.src,f=d.indexOf("://")+3,m=u?window.requestIdleCallback:requestIdleCallback,h=1,v=d.slice(f,d.indexOf("/",f));i&&v.indexOf("-")>0&&(v=s.dataset.vimiumId||"vimium-c@gdh1995.cn"),VimiumInjector.id=v=s.dataset.extensionId||v,u&&(m="function"!=typeof m||"tagName"in m?null:m),c=r?function(){a.sendMessage(v,{handler:99,scripts:true}).then(n,function(t){return n(void 0,t)})}:function(){a.sendMessage(v,{handler:99,scripts:true},function(t){var e=a.lastError;e?n(void 0,e):n(t)})},"loading"!==document.readyState?o():addEventListener("DOMContentLoaded",o,true)})(0,function(t){return function(e){function n(){var n,o=document.documentElement;o&&((n=document.createElement("script")).type="text/javascript",n.async=false,n.src=t,console.log("%cVimium C%c begins to reload%s.","color:red","color:auto",1===e?" because it has been updated.":""),(document.head||document.body||o).appendChild(n))}var o,c=VimiumInjector;c&&(o=c.clickable,"function"==typeof c.destroy&&c.destroy(true),c.clickable=o),e?setTimeout(n,200):n()}}),(!document.currentScript||"false"!==(document.currentScript.dataset.vimiumHooks||"").toLowerCase())&&null!==VimiumInjector.clickable&&(function(){var t,e,n,o,c,i,u,l,r;VimiumInjector.clickable=VimiumInjector.clickable||new WeakSet,t=EventTarget,true!==(n=(e=t.prototype).addEventListener).vimiumHooked&&(o=HTMLAnchorElement,c=Element,i=e.addEventListener=function addEventListener(t,e){var i,u,l;return"click"===t&&!(this instanceof o)&&e&&this instanceof c&&(i=VimiumInjector)&&i.clickable&&i.clickable.add(this),2===(l=(u=arguments).length)?n.call(this,t,e):3===l?n.call(this,t,e,u[2]):n.apply(this,u)},l=(u=Function.prototype).toString,r=u.toString=function toString(){return l.apply(this===i?n:this===r?l:this,arguments)},i.vimiumHooked=true,t.vimiumRemoveHooks=function(){delete t.vimiumRemoveHooks,e.addEventListener===i&&(e.addEventListener=n),u.toString===r&&(u.toString=l)},i.prototype=r.prototype=void 0)})();