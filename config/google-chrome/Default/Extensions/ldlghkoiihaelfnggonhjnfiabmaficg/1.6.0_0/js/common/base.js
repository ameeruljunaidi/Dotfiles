function _wrapRegExp(){function e(e,t){var o=n.call(this,e);return r.set(o,t),o}function t(e,t){var n=r.get(t);return Object.keys(n).reduce(function(t,o){return t[o]=e[n[o]],t},Object.create(null))}_wrapRegExp=function(t,n){return new e(t,n)};var n=_wrapNativeSuper(RegExp),o=RegExp.prototype,r=new WeakMap;return _inherits(e,n),e.prototype.exec=function(e){var n=o.exec.call(this,e);return n&&(n.groups=t(n,this)),n},e.prototype[Symbol.replace]=function(e,n){if("string"==typeof n){var a=r.get(this);return o[Symbol.replace].call(this,e,n.replace(/\$<([^>]+)>/g,function(e,t){return"$"+a[t]}))}if("function"==typeof n){var i=this;return o[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!=typeof e[e.length-1]&&e.push(t(e,i)),n.apply(this,e)})}return o[Symbol.replace].call(this,e,n)},_wrapRegExp.apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _possibleConstructorReturn(e,t){return t&&("object"==typeof t||"function"==typeof t)?t:_assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)},_wrapNativeSuper(e)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _construct(){return _construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=Function.bind.apply(e,o),a=new r;return n&&_setPrototypeOf(a,n.prototype),a},_construct.apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2017 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */ /* @preserve ⌃⇧⌥⌘ */(function(){function s(e,t,o){switch(o.length){case 0:return e.call(t);case 1:return e.call(t,o[0]);case 2:return e.call(t,o[0],o[1]);case 3:return e.call(t,o[0],o[1],o[2]);}return e.apply(t,o)}function k(o,t){for(var r=-1,a=null==o?0:o.length;++r<a&&!1!==t(o[r],r,o););return o}function r(a,t){for(var r,l=-1,s=null==a?0:a.length,e=0,c=[];++l<s;)r=a[l],t(r,l,a)&&(c[e++]=r);return c}function C(o,t){for(var r=-1,a=null==o?0:o.length,e=Array(a);++r<a;)e[r]=t(o[r],r,o);return e}function T(o,t){for(var r=-1,a=t.length,e=o.length;++r<a;)o[e+r]=t[r];return o}function F(o,t){for(var r=-1,a=null==o?0:o.length;++r<a;)if(t(o[r],r,o))return!0;return!1}function e(a,t,r,n){for(var e=a.length,i=r+(n?1:-1);n?i--:++i<e;)if(t(a[i],i,a))return i;return-1}function S(a,t,r){return t===t?u(a,t,r):e(a,o,r)}function c(a,t,r,n){for(var e=r-1,i=a.length;++e<i;)if(n(a[e],t))return e;return-1}function o(e){return e!==e}function n(e){return function(t){return null==t?ao:t[e]}}function l(o,t){for(var r=-1,a=Array(o);++r<o;)a[r]=t(r);return a}function a(e,t){return C(t,function(t){return[t,e[t]]})}function x(e){return function(t){return e(t)}}function h(e,t){return e.has(t)}function i(e,t){return null==e?ao:e[t]}function p(e){var o=-1,a=Array(e.size);return e.forEach(function(n,t){a[++o]=[t,n]}),a}function t(e,t){return function(o){return e(t(o))}}function _(e){var o=-1,a=Array(e.size);return e.forEach(function(e){a[++o]=e}),a}function d(e){var o=-1,a=Array(e.size);return e.forEach(function(e){a[++o]=[e,e]}),a}function u(o,t,r){for(var n=r-1,a=o.length;++n<a;)if(o[n]===t)return n;return-1}function g(){}function y(o){var t=-1,a=null==o?0:o.length;for(this.clear();++t<a;){var n=o[t];this.set(n[0],n[1])}}function b(o){var t=-1,a=null==o?0:o.length;for(this.clear();++t<a;){var n=o[t];this.set(n[0],n[1])}}function f(o){var t=-1,a=null==o?0:o.length;for(this.clear();++t<a;){var n=o[t];this.set(n[0],n[1])}}function m(e){var t=-1,o=null==e?0:e.length;for(this.__data__=new f;++t<o;)this.add(e[t])}function j(e){this.size=(this.__data__=new b(e)).size}function v(s,t){var r=Ke(s),n=!r&&Je(s),e=!r&&!n&&Qe(s),d=!r&&!n&&!e&&Ze(s),o=r||n||e||d,i=o?l(s.length,String):[],c=i.length;for(var a in s)!t&&!ce.call(s,a)||o&&("length"==a||e&&("offset"==a||"parent"==a)||d&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||St(a,c))||i.push(a);return i}function E(o,t,r){var n=o[t];ce.call(o,t)&&qt(n,r)&&(r!==ao||t in o)||R(o,t,r)}function w(e,t){for(var o=e.length;o--;)if(qt(e[o][0],t))return o;return-1}function P(e,t){return e&&pt(t,pn(t),e)}function I(e,t){return e&&pt(t,jn(t),e)}function R(e,t,o){"__proto__"==t&&je?je(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}function A(l,t,n,e,r,o){var d,u=t&so,a=t&co;if(n&&(d=r?n(l,e,r,o):n(l)),d!==ao)return d;if(!Gt(l))return l;var g=Ke(l);if(!g){var s=We(l),h=s==on||s==cn;if(Qe(l))return rt(l,u);if(s!=sn&&s!=yo&&(!h||r)){if(!Nn[s])return r?l:{};d=Ft(l,s,u)}else if(d=a||h?{}:wt(l),!u)return a?_t(l,I(d,l)):ut(l,P(d,l))}else if(d=Et(l),!u)return dt(l,d);o||(o=new j);var p=o.get(l);if(p)return p;if(o.set(l,d),Ye(l))return l.forEach(function(e){d.add(A(e,t,n,e,l,o))}),d;if(Xe(l))return l.forEach(function(e,r){d.set(r,A(e,t,n,r,l,o))}),d;var b=t&po?a?ft:bt:a?jn:pn,y=g?ao:b(l);return k(y||l,function(e,a){y&&(a=e,e=l[a]),E(d,a,A(e,t,n,a,l,o))}),d}function O(o,a){a=ot(a,o);for(var i=0,l=a.length;null!=o&&i<l;)o=o[Nt(a[i++])];return i&&i==l?o:ao}function D(o,t,r){var n=t(o);return Ke(o)?n:T(n,r(o))}function U(e){return null==e?e===ao?gn:ln:de&&de in Object(e)?Ct(e):Ut(e)}function B(e,t){return null!=e&&t in Object(e)}function L(e){return $t(e)&&U(e)==yo}function N(o,t,r,n,e){return o===t||(null!=o&&null!=t&&($t(o)||$t(t))?V(o,t,r,n,N,e):o!==o&&t!==t)}function V(d,t,r,n,e,u){var g=Ke(d),b=Ke(t),c=g?tn:We(d),m=b?tn:We(t);c=c==yo?sn:c,m=m==yo?sn:m;var k=c==sn,C=m==sn,s=c==m;if(s&&Qe(d)){if(!Qe(t))return!1;g=!0,k=!1}if(s&&!k)return u||(u=new j),g||Ze(d)?gt(d,t,r,n,e,u):ht(d,t,c,r,n,e,u);if(!(r&uo)){var h=k&&ce.call(d,"__wrapped__"),p=C&&ce.call(t,"__wrapped__");if(h||p){var v=h?d.value():d,y=p?t.value():t;return u||(u=new j),e(v,y,r,n,u)}}return!!s&&(u||(u=new j),yt(d,t,r,n,e,u))}function M(e){return $t(e)&&We(e)==an}function H(d,p,r,n){var e=r.length,_=e,o=!n;if(null==d)return!_;for(d=Object(d);e--;){var i=r[e];if(o&&i[2]?i[1]!==d[i[0]]:!(i[0]in d))return!1}for(;++e<_;){i=r[e];var g=i[0],a=d[g],y=i[1];if(!(o&&i[2])){var l=new j;if(n)var s=n(a,y,g,d,p,l);if(s===ao?!N(y,a,uo|_o,n,l):!s)return!1}else if(a===ao&&!(g in d))return!1}return!0}function K(e){return Gt(e)&&!It(e)&&(Qt(e)?le:Rn).test(Vt(e))}function q(e){return $t(e)&&We(e)==yn}function z(e){return"function"==typeof e?e:null==e?eo:"object"==typeof e?Ke(e)?$(e[0],e[1]):G(e):no(e)}function Q(e){if(!Rt(e))return Oe(e);var t=[];for(var o in Object(e))ce.call(e,o)&&"constructor"!=o&&t.push(o);return t}function W(o){if(!Gt(o))return Dt(o);var t=Rt(o),r=[];for(var n in o)("constructor"!=n||!t&&ce.call(o,n))&&r.push(n);return r}function G(e){var t=vt(e);return 1==t.length&&t[0][2]?Ot(t[0][0],t[0][1]):function(o){return o===e||H(o,e,t)}}function $(o,t){return xt(o)&&At(t)?Ot(Nt(o),t):function(r){var n=Yt(r,o);return n===ao&&n===t?Zt(r,o):N(t,n,uo|_o)}}function X(e){return function(t){return O(t,e)}}function J(e,t,a,n){var d=n?c:S,o=-1,u=t.length,_=e;for(e===t&&(t=dt(t)),a&&(_=C(e,x(a)));++o<u;)for(var g=0,y=t[o],h=a?a(y):y;-1<(g=d(_,h,g,n));)_!==e&&ge.call(_,g,1),ge.call(e,g,1);return e}function Y(a,t){for(var r,i=a?t.length:0,l=i-1;i--;)if(r=t[i],i==l||r!==e){var e=r;St(r)?ge.call(a,r,1):tt(a,r)}return a}function Z(a,t,i){var l=-1,s=a.length;0>t&&(t=-t>s?0:s+t),i=i>s?s:i,0>i&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var c=Array(s);++l<s;)c[l]=a[l+t];return c}function et(e){if("string"==typeof e)return e;if(Ke(e))return C(e,et)+"";if(Xt(e))return Re?Re.call(e):"";var t=e+"";return"0"==t&&1/e==-go?"-0":t}function tt(e,n){return n=ot(n,e),e=Lt(e,n),null==e||delete e[Nt(Mt(n))]}function nt(a,t,r,n){for(var e=a.length,i=n?e:-1;(n?i--:++i<e)&&t(a[i],i,a););return r?Z(a,n?0:i,n?i+1:e):Z(a,n?i+1:0,n?e:i)}function ot(e,t){return Ke(e)?e:xt(e,t)?[e]:Ge(Jt(e))}function rt(o,t){if(t)return o.slice();var r=o.length,n=ve?ve(r):new o.constructor(r);return o.copy(n),n}function at(e){var t=new e.constructor(e.byteLength);return new pe(t).set(new pe(e)),t}function it(e,t){return new e.constructor(t?at(e.buffer):e.buffer,e.byteOffset,e.byteLength)}function lt(e){var t=new e.constructor(e.source,Bn.exec(e));return t.lastIndex=e.lastIndex,t}function st(e){return Be?Object(Be.call(e)):{}}function ct(e,t){return new e.constructor(t?at(e.buffer):e.buffer,e.byteOffset,e.length)}function dt(o,t){var a=-1,i=o.length;for(t||(t=Array(i));++a<i;)t[a]=o[a];return t}function pt(l,t,r,s){var e=!r;r||(r={});for(var d=-1,p=t.length;++d<p;){var i=t[d],c=s?s(r[i],l[i],i,r,l):ao;c===ao&&(c=l[i]),e?R(r,i,c):E(r,i,c)}return r}function ut(e,t){return pt(e,Ne(e),t)}function _t(e,t){return pt(e,Ve(e),t)}function gt(o,t,d,n,e,u){var r=d&uo,i=o.length,a=t.length;if(i!=a&&!(r&&a>i))return!1;var c=u.get(o);if(c&&u.get(t))return c==t;var l=-1,g=!0,y=d&_o?new m:ao;for(u.set(o,t),u.set(t,o);++l<i;){var p=o[l],f=t[l];if(n)var _=r?n(f,p,l,t,o,u):n(p,f,l,o,t,u);if(_!==ao){if(_)continue;g=!1;break}if(y){if(!F(t,function(o,t){if(!h(y,t)&&(p===o||e(p,o,d,n,u)))return y.push(t)})){g=!1;break}}else if(p!==f&&!e(p,f,d,n,u)){g=!1;break}}return u.delete(o),u.delete(t),g}function ht(s,d,g,n,h,u,o){switch(g){case wn:if(s.byteLength!=d.byteLength||s.byteOffset!=d.byteOffset)return!1;s=s.buffer,d=d.buffer;case dn:return s.byteLength==d.byteLength&&u(new pe(s),new pe(d));case nn:case en:case fn:return qt(+s,+d);case un:return s.name==d.name&&s.message==d.message;case vn:case _n:return s==d+"";case an:var i=p;case yn:var y=n&uo;if(i||(i=_),s.size!=d.size&&!y)return!1;var a=o.get(s);if(a)return a==d;n|=_o,o.set(s,d);var b=gt(i(s),i(d),n,h,u,o);return o.delete(s),b;case bn:if(Be)return Be.call(s)==Be.call(d);}return!1}function yt(d,t,r,n,e,u){var o=r&uo,i=bt(d),c=i.length;if(c!=bt(t).length&&!o)return!1;for(var a,m=c;m--;)if(a=i[m],o?!(a in t):!ce.call(t,a))return!1;var k=u.get(d);if(k&&u.get(t))return k==t;var s=!0;u.set(d,t),u.set(t,d);for(var j=o;++m<c;){a=i[m];var C=d[a],v=t[a];if(n)var y=o?n(v,C,a,t,d,u):n(C,v,a,d,t,u);if(y===ao?!(C===v||e(C,v,r,n,u)):!y){s=!1;break}j||(j="constructor"==a)}if(s&&!j){var _=d.constructor,b=t.constructor;_!=b&&"constructor"in d&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(s=!1)}return u.delete(d),u.delete(t),s}function bt(e){return D(e,pn,Ne)}function ft(e){return D(e,jn,Ve)}function mt(){var e=g.iteratee||to;return e=e===to?z:e,arguments.length?e(arguments[0],arguments[1]):e}function kt(e,t){var o=e.__data__;return Pt(t)?o["string"==typeof t?"string":"hash"]:o.map}function vt(o){for(var t=pn(o),r=t.length;r--;){var a=t[r],e=o[a];t[r]=[a,e,At(e)]}return t}function jt(e,t){var o=i(e,t);return K(o)?o:ao}function Ct(o){var t=ce.call(o,de),r=o[de];try{o[de]=ao;var n=!0}catch(e){}var e=fe.call(o);return n&&(t?o[de]=r:delete o[de]),e}function Tt(a,l,s){l=ot(l,a);for(var n,c=-1,d=l.length,p=!1;++c<d&&(n=Nt(l[c]),!!(p=null!=a&&s(a,n)));)a=a[n];return p||++c!=d?p:(d=null==a?0:a.length,!!d&&Wt(d)&&St(n,d)&&(Ke(a)||Je(a)))}function Et(e){var t=e.length,o=new e.constructor(t);return t&&"string"==typeof e[0]&&ce.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function wt(e){return"function"!=typeof e.constructor||Rt(e)?{}:Ce(ye(e))}function Ft(o,t,r){var n=o.constructor;return t===dn?at(o):t===nn||t===en?new n(+o):t===wn?it(o,r):t===mn||t===On||t===An||t===zn||t===xn||t===Sn||t===kn||t===En||t===$n?ct(o,r):t===an?new n:t===fn||t===_n?new n(o):t===vn?lt(o):t===yn?new n:t===bn?st(o):void 0}function St(e,t){var o=typeof e;return t=null==t?ho:t,!!t&&("number"==o||"symbol"!=o&&Cn.test(e))&&-1<e&&0==e%1&&e<t}function xt(e,t){if(Ke(e))return!1;var o=typeof e;return"number"==o||"symbol"==o||"boolean"==o||null==e||Xt(e)||Fn.test(e)||!Pn.test(e)||null!=t&&e in Object(t)}function Pt(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function It(e){return!!ae&&ae in e}function Rt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ue)}function At(e){return e===e&&!Gt(e)}function Ot(e,t){return function(o){return null!=o&&o[e]===t&&(t!==ao||e in Object(o))}}function Dt(e){var t=[];if(null!=e)for(var o in Object(e))t.push(o);return t}function Ut(e){return fe.call(e)}function Bt(t,r,l){return r=Ae(r===ao?t.length-1:r,0),function(){for(var e=arguments,n=-1,d=Ae(e.length-r,0),i=Array(d);++n<d;)i[n]=e[r+n];n=-1;for(var c=Array(r+1);++n<r;)c[n]=e[n];return c[r]=l(i),s(t,this,c)}}function Lt(e,t){return 2>t.length?e:O(e,Z(t,0,-1))}function Nt(e){if("string"==typeof e||Xt(e))return e;var t=e+"";return"0"==t&&1/e==-go?"-0":t}function Vt(e){if(null!=e){try{return ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Mt(e){var t=null==e?0:e.length;return t?e[t-1]:ao}function Ht(e,t){return e&&e.length&&t&&t.length?J(e,t):e}function Kt(a,t){if("function"!=typeof a||null!=t&&"function"!=typeof t)throw new TypeError(io);var r=function(){var n=arguments,e=t?t.apply(this,n):n[0],l=r.cache;if(l.has(e))return l.get(e);var o=a.apply(this,n);return r.cache=l.set(e,o)||l,o};return r.cache=new(Kt.Cache||f),r}function qt(e,t){return e===t||e!==e&&t!==t}function zt(e){return null!=e&&Wt(e.length)&&!Qt(e)}function Qt(e){if(!Gt(e))return!1;var t=U(e);return t==on||t==cn||t==rn||t==hn}function Wt(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=ho}function Gt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $t(e){return null!=e&&"object"==typeof e}function Xt(e){return"symbol"==typeof e||$t(e)&&U(e)==bn}function Jt(e){return null==e?"":et(e)}function Yt(o,t,r){var n=null==o?ao:O(o,t);return n===ao?r:n}function Zt(e,t){return null!=e&&Tt(e,t,B)}function pn(e){return zt(e)?v(e):Q(e)}function jn(e){return zt(e)?v(e,!0):W(e)}function Wn(e){return function(){return e}}function eo(e){return e}function to(e){return z("function"==typeof e?e:A(e,so))}function no(e){return xt(e)?n(Nt(e)):X(e)}function oo(){return[]}function ro(){return!1}var ao,io="Expected a function",lo="__lodash_hash_undefined__",so=1,co=2,po=4,uo=1,_o=2,go=1/0,ho=9007199254740991,yo="[object Arguments]",tn="[object Array]",rn="[object AsyncFunction]",nn="[object Boolean]",en="[object Date]",un="[object Error]",on="[object Function]",cn="[object GeneratorFunction]",an="[object Map]",fn="[object Number]",ln="[object Null]",sn="[object Object]",hn="[object Proxy]",vn="[object RegExp]",yn="[object Set]",_n="[object String]",bn="[object Symbol]",gn="[object Undefined]",dn="[object ArrayBuffer]",wn="[object DataView]",mn="[object Float32Array]",On="[object Float64Array]",An="[object Int8Array]",zn="[object Int16Array]",xn="[object Int32Array]",Sn="[object Uint8Array]",kn="[object Uint8ClampedArray]",En="[object Uint16Array]",$n="[object Uint32Array]",In=/[&<>"']/g,Ln=RegExp(In.source),Pn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fn=/^\w*$/,Mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tn=/[\\^$.*+?()[\]{}|]/g,Un=/\\(\\)?/g,Bn=/\w*$/,Rn=/^\[object .+?Constructor\]$/,Cn=/^(?:0|[1-9]\d*)$/,Dn={};Dn["[object Float32Array]"]=Dn["[object Float64Array]"]=Dn["[object Int8Array]"]=Dn["[object Int16Array]"]=Dn["[object Int32Array]"]=Dn["[object Uint8Array]"]=Dn["[object Uint8ClampedArray]"]=Dn["[object Uint16Array]"]=Dn["[object Uint32Array]"]=!0,Dn["[object Arguments]"]=Dn["[object Array]"]=Dn["[object ArrayBuffer]"]=Dn["[object Boolean]"]=Dn["[object DataView]"]=Dn["[object Date]"]=Dn["[object Error]"]=Dn["[object Function]"]=Dn["[object Map]"]=Dn["[object Number]"]=Dn["[object Object]"]=Dn["[object RegExp]"]=Dn["[object Set]"]=Dn["[object String]"]=Dn["[object WeakMap]"]=!1;var Nn={};Nn["[object Arguments]"]=Nn["[object Array]"]=Nn["[object ArrayBuffer]"]=Nn["[object DataView]"]=Nn["[object Boolean]"]=Nn["[object Date]"]=Nn["[object Float32Array]"]=Nn["[object Float64Array]"]=Nn["[object Int8Array]"]=Nn["[object Int16Array]"]=Nn["[object Int32Array]"]=Nn["[object Map]"]=Nn["[object Number]"]=Nn["[object Object]"]=Nn["[object RegExp]"]=Nn["[object Set]"]=Nn["[object String]"]=Nn["[object Symbol]"]=Nn["[object Uint8Array]"]=Nn["[object Uint8ClampedArray]"]=Nn["[object Uint16Array]"]=Nn["[object Uint32Array]"]=!0,Nn["[object Error]"]=Nn["[object Function]"]=Nn["[object WeakMap]"]=!1;var Vn="object"==typeof global&&global&&global.Object===Object&&global,qn="object"==typeof self&&self&&self.Object===Object&&self,Gn=Vn||qn||Function("return this")(),Hn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Jn=Hn&&"object"==typeof module&&module&&!module.nodeType&&module,Kn=Jn&&Jn.exports===Hn,Qn=Kn&&Vn.process,Xn=function(){try{return Qn&&Qn.binding&&Qn.binding("util")}catch(e){}}(),Yn=Xn&&Xn.isMap,Zn=Xn&&Xn.isSet,te=Xn&&Xn.isTypedArray,re=function(e){return function(t){return null==e?ao:e[t]}}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),ne=Array.prototype,ee=Function.prototype,ue=Object.prototype,oe=Gn["__core-js_shared__"],ie=ee.toString,ce=ue.hasOwnProperty,ae=function(){var e=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),fe=ue.toString,le=RegExp("^"+ie.call(ce).replace(Tn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=Kn?Gn.Buffer:ao,he=Gn.Symbol,pe=Gn.Uint8Array,ve=se?se.allocUnsafe:ao,ye=t(Object.getPrototypeOf,Object),_e=Object.create,be=ue.propertyIsEnumerable,ge=ne.splice,de=he?he.toStringTag:ao,je=function(){try{var e=jt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),we=Object.getOwnPropertySymbols,me=se?se.isBuffer:ao,Oe=t(Object.keys,Object),Ae=Math.max,ze=Date.now,xe=jt(Gn,"DataView"),Se=jt(Gn,"Map"),ke=jt(Gn,"Promise"),Ee=jt(Gn,"Set"),$e=jt(Gn,"WeakMap"),Ie=jt(Object,"create"),Le=Vt(xe),Pe=Vt(Se),Fe=Vt(ke),Me=Vt(Ee),Te=Vt($e),Ue=he?he.prototype:ao,Be=Ue?Ue.valueOf:ao,Re=Ue?Ue.toString:ao,Ce=function(){function e(){}return function(t){if(!Gt(t))return{};if(_e)return _e(t);e.prototype=t;var o=new e;return e.prototype=ao,o}}();y.prototype.clear=function(){this.__data__=Ie?Ie(null):{},this.size=0},y.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},y.prototype.get=function(e){var t=this.__data__;if(Ie){var o=t[e];return o===lo?ao:o}return ce.call(t,e)?t[e]:ao},y.prototype.has=function(e){var t=this.__data__;return Ie?t[e]!==ao:ce.call(t,e)},y.prototype.set=function(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Ie&&t===ao?lo:t,this},b.prototype.clear=function(){this.__data__=[],this.size=0},b.prototype.delete=function(e){var t=this.__data__,o=w(t,e);return!(0>o)&&(o==t.length-1?t.pop():ge.call(t,o,1),--this.size,!0)},b.prototype.get=function(e){var t=this.__data__,o=w(t,e);return 0>o?ao:t[o][1]},b.prototype.has=function(e){return-1<w(this.__data__,e)},b.prototype.set=function(o,t){var r=this.__data__,n=w(r,o);return 0>n?(++this.size,r.push([o,t])):r[n][1]=t,this},f.prototype.clear=function(){this.size=0,this.__data__={hash:new y,map:new(Se||b),string:new y}},f.prototype.delete=function(e){var t=kt(this,e).delete(e);return this.size-=t?1:0,t},f.prototype.get=function(e){return kt(this,e).get(e)},f.prototype.has=function(e){return kt(this,e).has(e)},f.prototype.set=function(o,t){var r=kt(this,o),n=r.size;return r.set(o,t),this.size+=r.size==n?0:1,this},m.prototype.add=m.prototype.push=function(e){return this.__data__.set(e,lo),this},m.prototype.has=function(e){return this.__data__.has(e)},j.prototype.clear=function(){this.__data__=new b,this.size=0},j.prototype.delete=function(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o},j.prototype.get=function(e){return this.__data__.get(e)},j.prototype.has=function(e){return this.__data__.has(e)},j.prototype.set=function(o,t){var r=this.__data__;if(r instanceof b){var a=r.__data__;if(!Se||a.length<200-1)return a.push([o,t]),this.size=++r.size,this;r=this.__data__=new f(a)}return r.set(o,t),this.size=r.size,this};var De=je?function(e,t){return je(e,"toString",{configurable:!0,enumerable:!1,value:Wn(t),writable:!0})}:eo,Ne=we?function(e){return null==e?[]:(e=Object(e),r(we(e),function(t){return be.call(e,t)}))}:oo,Ve=we?function(e){for(var n=[];e;)T(n,Ne(e)),e=ye(e);return n}:oo,We=U;(xe&&We(new xe(new ArrayBuffer(1)))!="[object DataView]"||Se&&We(new Se)!="[object Map]"||ke&&We(ke.resolve())!="[object Promise]"||Ee&&We(new Ee)!="[object Set]"||$e&&We(new $e)!="[object WeakMap]")&&(We=function(o){var t=U(o),r=t=="[object Object]"?o.constructor:ao,n=r?Vt(r):"";if(n)switch(n){case Le:return"[object DataView]";case Pe:return"[object Map]";case Fe:return"[object Promise]";case Me:return"[object Set]";case Te:return"[object WeakMap]";}return t});var bo=function(o){var t=0,a=0;return function(){var n=ze(),e=16-(n-a);if(!(a=n,0<e))t=0;else if(++t>=800)return arguments[0];return o.apply(ao,arguments)}}(De),Ge=function(e){var t=Kt(e,function(e){return o.size===500&&o.clear(),e}),o=t.cache;return t}(function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(Mn,function(r,t,n,e){o.push(n?e.replace(Un,"$1"):t||r)}),o}),He=function(e,t){return bo(Bt(e,t,eo),e+"")}(Ht);Kt.Cache=f;var Je=L(function(){return arguments}())?L:function(e){return $t(e)&&ce.call(e,"callee")&&!be.call(e,"callee")},Ke=Array.isArray,Qe=me||ro,Xe=Yn?x(Yn):M,Ye=Zn?x(Zn):q,Ze=te?x(te):function(e){return $t(e)&&Wt(e.length)&&!!Dn[U(e)]},fo=function(e){return function(t){var o=We(t);return o==an?p(t):o==yn?d(t):a(t,e(t))}}(pn);g.constant=Wn,g.dropRightWhile=function(e,t){return e&&e.length?nt(e,mt(t,3),!0,!0):[]},g.iteratee=to,g.keys=pn,g.keysIn=jn,g.memoize=Kt,g.property=no,g.pull=He,g.pullAll=Ht,g.remove=function(a,t){var l=[];if(!a||!a.length)return l;var n=-1,s=[],c=a.length;for(t=mt(t,3);++n<c;){var o=a[n];t(o,n,a)&&(l.push(o),s.push(n))}return Y(a,s),l},g.toPairs=fo,g.entries=fo,g.eq=qt,g.escape=function(e){return e=Jt(e),e&&Ln.test(e)?e.replace(In,re):e},g.get=Yt,g.hasIn=Zt,g.identity=eo,g.isArguments=Je,g.isArray=Ke,g.isArrayLike=zt,g.isBuffer=Qe,g.isFunction=Qt,g.isLength=Wt,g.isMap=Xe,g.isObject=Gt,g.isObjectLike=$t,g.isSet=Ye,g.isSymbol=Xt,g.isTypedArray=Ze,g.last=Mt,g.stubArray=oo,g.stubFalse=ro,g.toString=Jt,g.VERSION="4.17.5","function"==typeof define&&"object"==typeof define.amd&&define.amd&&define("lodash",[],function(){return g})}).call(this),!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define("bluebird",[],n);else{var t;"undefined"==typeof window?"undefined"==typeof global?"undefined"!=typeof self&&(t=self):t=global:t=window,t.Promise=n()}}(function(){return function d(r,t,e){function l(o,a){if(!t[o]){if(!r[o]){var i="function"==typeof _dereq_&&_dereq_;if(!a&&i)return i(o,!0);if(n)return n(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[o]={exports:{}};r[o][0].call(c.exports,function(t){var e=r[o][1][t];return l(e?e:t)},c,c.exports,d,r,t,e)}return t[o].exports}for(var n="function"==typeof _dereq_&&_dereq_,o=0;o<e.length;o++)l(e[o]);return l}({1:[function(n,t){"use strict";function e(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=c}function r(o,t,e){this._lateQueue.push(o,t,e),this._queueTick()}function i(o,t,e){this._normalQueue.push(o,t,e),this._queueTick()}function o(e){this._normalQueue._pushOne(e),this._queueTick()}var a;try{throw new Error}catch(e){a=e}var c=n("./schedule"),l=n("./queue"),d=n("./util");e.prototype.setScheduler=function(n){var t=this._schedule;return this._schedule=n,this._customScheduler=!0,t},e.prototype.hasCustomScheduler=function(){return this._customScheduler},e.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},e.prototype.disableTrampolineIfNecessary=function(){d.hasDevTools&&(this._trampolineEnabled=!1)},e.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},e.prototype.fatalError=function(n,t){t?(process.stderr.write("Fatal "+(n instanceof Error?n.stack:n)+"\n"),process.exit(2)):this.throwLater(n)},e.prototype.throwLater=function(n,o){if(1===arguments.length&&(o=n,n=function(){throw o}),"undefined"!=typeof setTimeout)setTimeout(function(){n(o)},0);else try{this._schedule(function(){n(o)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},d.hasDevTools?(e.prototype.invokeLater=function(o,t,e){this._trampolineEnabled?r.call(this,o,t,e):this._schedule(function(){setTimeout(function(){o.call(t,e)},100)})},e.prototype.invoke=function(o,t,e){this._trampolineEnabled?i.call(this,o,t,e):this._schedule(function(){o.call(t,e)})},e.prototype.settlePromises=function(e){this._trampolineEnabled?o.call(this,e):this._schedule(function(){e._settlePromises()})}):(e.prototype.invokeLater=r,e.prototype.invoke=i,e.prototype.settlePromises=o),e.prototype._drainQueue=function(o){for(;0<o.length();){var t=o.shift();if("function"==typeof t){var e=o.shift(),n=o.shift();t.call(e,n)}else t._settlePromises()}},e.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},e.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},e.prototype._reset=function(){this._isTickUsed=!1},t.exports=e,t.exports.firstLineError=a},{"./queue":17,"./schedule":18,"./util":21}],2:[function(n,t){"use strict";t.exports=function(d,t,e,n){var r=!1,l=function(n,t){this._reject(t)},o=function(n,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(l,l,null,this,n)},a=function(n,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},s=function(n,t){t.promiseRejectionQueued||this._reject(n)};d.prototype.bind=function(i){r||(r=!0,d.prototype._propagateFrom=n.propagateFromFunction(),d.prototype._boundValue=n.boundValueFunction());var c=e(i),l=new d(t);l._propagateFrom(this,1);var u=this._target();if(l._setBoundTo(c),c instanceof d){var p={promiseRejectionQueued:!1,promise:l,target:u,bindingPromise:c};u._then(t,o,void 0,l,p),c._then(a,s,void 0,l,p),l._setOnCancel(c)}else l._resolveCallback(u);return l},d.prototype._setBoundTo=function(e){void 0===e?this._bitField=-2097153&this._bitField:(this._bitField=2097152|this._bitField,this._boundTo=e)},d.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},d.bind=function(t,e){return d.resolve(e).bind(t)}}},{}],3:[function(n,t){"use strict";function e(){try{Promise===a&&(Promise=r)}catch(e){}return a}var r;"undefined"!=typeof Promise&&(r=Promise);var a=n("./promise")();a.noConflict=e,t.exports=a},{"./promise":15}],4:[function(l,t){"use strict";t.exports=function(t,e,n,r){var i=l("./util"),o=i.tryCatch,a=i.errorObj,s=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var o=this,a=o;o._isCancellable();){if(!o._cancelBy(a)){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}var i=o._cancellationParent;if(null==i||!i._isCancellable()){o._isFollowing()?o._followee().cancel():o._cancelBranched();break}o._isFollowing()&&o._followee().cancel(),o._setWillBeCancelled(),a=o,o=i}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||0>=this._branchesRemainingToCancel},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(l,t){if(i.isArray(l))for(var e=0;e<l.length;++e)this._doInvokeOnCancel(l[e],t);else if(void 0!==l)if(!("function"==typeof l))l._resultCancelled(this);else if(!t){var c=o(l).call(this._boundValue());c===a&&(this._attachExtraTrace(c.e),s.throwLater(c.e))}},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(l,t){"use strict";t.exports=function(g){function e(e,a,n){return function(i){var c=n._boundValue();t:for(var l,y=0;y<e.length;++y)if(l=e[y],l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return r(a).call(c,i);}else if("function"==typeof l){var b=r(l).call(c,i);if(b===o)return b;if(b)return r(a).call(c,i)}else if(s.isObject(i)){for(var f,m=t(l),h=0;h<m.length;++h)if(f=m[h],l[f]!=i[f])continue t;return r(a).call(c,i)}return g}}var s=l("./util"),t=l("./es5").keys,r=s.tryCatch,o=s.errorObj;return e}},{"./es5":10,"./util":21}],6:[function(n,t){"use strict";t.exports=function(l){function t(){this._trace=new t.CapturedTrace(d())}function e(){return r?new t:void 0}function d(){var e=n.length-1;return 0<=e?n[e]:void 0}var r=!1,n=[];return l.prototype._promiseCreated=function(){},l.prototype._pushContext=function(){},l.prototype._popContext=function(){return null},l._peekContext=l.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var o=n.pop(),t=o._promiseCreated;return o._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=e,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var e=l.prototype._pushContext,n=l.prototype._popContext,o=l._peekContext,a=l.prototype._peekContext,i=l.prototype._promiseCreated;t.deactivateLongStackTraces=function(){l.prototype._pushContext=e,l.prototype._popContext=n,l._peekContext=o,l.prototype._peekContext=a,l.prototype._promiseCreated=i,r=!1},r=!0,l.prototype._pushContext=t.prototype._pushContext,l.prototype._popContext=t.prototype._popContext,l._peekContext=l.prototype._peekContext=d,l.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],7:[function(p,t){"use strict";t.exports=function(v,e){function t(n,t){return{promise:t}}function r(){return!1}function n(o,t,e){var n=this;try{o(t,e,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+U.toString(e));n._attachCancellationCallback(e)})}catch(e){return e}}function o(n){if(!this._isCancellable())return this;var t=this._onCancel();void 0===t?this._setOnCancel(n):U.isArray(t)?t.push(n):this._setOnCancel([t,n])}function a(){return this._onCancelField}function i(e){this._onCancelField=e}function s(){this._cancellationParent=void 0,this._onCancelField=void 0}function l(o,t){if(0!=(1&t)){this._cancellationParent=o;var e=o._branchesRemainingToCancel;void 0===e&&(e=0),o._branchesRemainingToCancel=e+1}0!=(2&t)&&o._isBound()&&this._setBoundTo(o._boundTo)}function c(){var e=this._boundTo;return void 0!==e&&e instanceof v?e.isFulfilled()?e.value():void 0:e}function u(){this._trace=new S(this._peekContext())}function h(o,t){if(I(o)){var e=this._trace;if(void 0!==e&&t&&(e=e._parent),void 0!==e)e.attachExtraTrace(o);else if(!o.__stackCleaned__){var a=C(o);U.notEnumerableProp(o,"stack",a.message+"\n"+a.stack.join("\n")),U.notEnumerableProp(o,"__stackCleaned__",!0)}}}function _(d,t,e,_,r){if(void 0===d&&null!==t&&z){if(void 0!==r&&r._returnedNonUndefined())return;if(0==(65535&_._bitField))return;e&&(e+=" ");var i="",g="";if(t._trace){for(var y,m=t._trace.stack.split("\n"),s=b(m),c=s.length-1;0<=c;--c)if(y=s[c],!D.test(y)){var k=y.match(V);k&&(i="at "+k[1]+":"+k[2]+":"+k[3]+" ");break}if(0<s.length)for(var p=s[0],c=0;c<m.length;++c)if(m[c]===p){0<c&&(g="\n"+m[c-1]);break}}var f="a promise was created in a "+e+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+g;_._warn(f,!0,t)}}function d(e,t,n){if(de.warnings){var r,l=new B(e);if(t)n._attachExtraTrace(l);else if(de.longStackTraces&&(r=v._peekContext()))r.attachExtraTrace(l);else{var o=C(l);l.stack=o.message+"\n"+o.stack.join("\n")}Z("warning",l)||E(l,"",!0)}}function y(o,t){for(var e=0;e<t.length-1;++e)t[e].push("From previous event:"),t[e]=t[e].join("\n");return e<t.length&&(t[e]=t[e].join("\n")),o+"\n"+t.join("\n")}function g(n){for(var t=0;t<n.length;++t)(0===n[t].length||t+1<n.length&&n[t][0]===n[t+1][0])&&(n.splice(t,1),t--)}function f(l){for(var t=l[0],d=1;d<l.length;++d){for(var p=l[d],r=t.length-1,u=t[r],o=-1,_=p.length-1;0<=_;--_)if(p[_]===u){o=_;break}for(var g,_=o;0<=_&&(g=p[_],t[r]===g);--_)t.pop(),r--;t=p}}function b(a){for(var t=[],e=0;e<a.length;++e){var l=a[e],s="    (No stack trace)"===l||Q.test(l),i=s&&le(l);s&&!i&&(ne&&" "!==l.charAt(0)&&(l="    "+l),t.push(l))}return t}function m(o){for(var t,a=o.stack.replace(/\s+$/g,"").split("\n"),i=0;i<a.length&&(t=a[i],!("    (No stack trace)"===t||Q.test(t)));++i);return 0<i&&"SyntaxError"!=o.name&&(a=a.slice(i)),a}function C(o){var t=o.stack,r=o.toString();return t="string"==typeof t&&0<t.length?m(o):["    (No stack trace)"],{message:r,stack:"SyntaxError"==o.name?t:b(t)}}function E(o,t,e){if("undefined"!=typeof console){var n;if(U.isObject(o)){var a=o.stack;n=t+te(a,o)}else n=t+(o+"");"function"==typeof R?R(n,e):("function"==typeof console.log||"object"==typeof console.log)&&console.log(n)}}function k(o,t,e,n){var r=!1;try{"function"==typeof t&&(r=!0,"rejectionHandled"===o?t(n):t(e,n))}catch(e){N.throwLater(e)}"unhandledRejection"===o?Z(o,e,n)||r||E(e,"Unhandled rejection "):Z(o,n)}function j(o){var t;if("function"==typeof o)t="[function "+(o.name||"anonymous")+"]";else{t=o&&"function"==typeof o.toString?o.toString():U.toString(o);var a=/\[object [a-zA-Z0-9$_]+\]/;if(a.test(t))try{var n=JSON.stringify(o);t=n}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+w(t)+">, no stack trace)"}function w(e){return e.length<41?e:e.substr(0,38)+"..."}function T(){return"function"==typeof ce}function F(n){var t=n.match(se);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function S(n){this._parent=n,this._promisesCreated=0;var t=this._length=1+(void 0===n?0:n._length);ce(this,S),32<t&&this.uncycle()}var x,P,R,ee=v._getDomain,N=v._async,B=p("./errors").Warning,U=p("./util"),I=U.canAttachTrace,H=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,D=/\((?:timers\.js):\d+:\d+\)/,V=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,Q=null,te=null,ne=!1,oe=0!=U.env("BLUEBIRD_DEBUG")&&(U.env("BLUEBIRD_DEBUG")||"development"===U.env("NODE_ENV")),W=0!=U.env("BLUEBIRD_WARNINGS")&&(oe||U.env("BLUEBIRD_WARNINGS")),$=0!=U.env("BLUEBIRD_LONG_STACK_TRACES")&&(oe||U.env("BLUEBIRD_LONG_STACK_TRACES")),z=0!=U.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!U.env("BLUEBIRD_W_FORGOTTEN_RETURN"));v.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=524288|-1048577&e._bitField},v.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),N.invokeLater(this._notifyUnhandledRejection,this,void 0))},v.prototype._notifyUnhandledRejectionIsHandled=function(){k("rejectionHandled",x,void 0,this)},v.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},v.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},v.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),k("unhandledRejection",P,e,this)}},v.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},v.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},v.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},v.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},v.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},v.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},v.prototype._warn=function(o,t,e){return d(o,t,e||this)},v.onPossiblyUnhandledRejection=function(n){var t=ee();P="function"==typeof n?null===t?n:U.domainBind(t,n):void 0},v.onUnhandledRejectionHandled=function(n){var t=ee();x="function"==typeof n?null===t?n:U.domainBind(t,n):void 0};var re=function(){};v.longStackTraces=function(){if(N.haveItemsQueued()&&!de.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!de.longStackTraces&&T()){var n=v.prototype._captureStackTrace,t=v.prototype._attachExtraTrace;de.longStackTraces=!0,re=function(){if(N.haveItemsQueued()&&!de.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");v.prototype._captureStackTrace=n,v.prototype._attachExtraTrace=t,e.deactivateLongStackTraces(),N.enableTrampoline(),de.longStackTraces=!1},v.prototype._captureStackTrace=u,v.prototype._attachExtraTrace=h,e.activateLongStackTraces(),N.disableTrampolineIfNecessary()}},v.hasLongStackTraces=function(){return de.longStackTraces&&T()};var ae=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return U.global.dispatchEvent(e),function(o,t){var e=new CustomEvent(o.toLowerCase(),{detail:t,cancelable:!0});return!U.global.dispatchEvent(e)}}if("function"==typeof Event){var e=new Event("CustomEvent");return U.global.dispatchEvent(e),function(o,t){var e=new Event(o.toLowerCase(),{cancelable:!0});return e.detail=t,!U.global.dispatchEvent(e)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),U.global.dispatchEvent(e),function(o,t){var e=document.createEvent("CustomEvent");return e.initCustomEvent(o.toLowerCase(),!1,!0,t),!U.global.dispatchEvent(e)}}catch(t){}return function(){return!1}}(),J=function(){return U.isNode?function(){return process.emit.apply(process,arguments)}:U.global?function(o){var t="on"+o.toLowerCase(),e=U.global[t];return!!e&&(e.apply(U.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),Y={promiseCreated:t,promiseFulfilled:t,promiseRejected:t,promiseResolved:t,promiseCancelled:t,promiseChained:function(o,t,e){return{promise:t,child:e}},warning:function(n,t){return{warning:t}},unhandledRejection:function(o,t,e){return{reason:t,promise:e}},rejectionHandled:t},Z=function(n){var t=!1;try{t=J.apply(null,arguments)}catch(e){N.throwLater(e),t=!0}var o=!1;try{o=ae(n,Y[n].apply(null,arguments))}catch(e){N.throwLater(e),o=!0}return o||t};v.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?v.longStackTraces():!e.longStackTraces&&v.hasLongStackTraces()&&re()),"warnings"in e){var c=e.warnings;de.warnings=!!c,z=de.warnings,U.isObject(c)&&"wForgottenReturn"in c&&(z=!!c.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!de.cancellation){if(N.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");v.prototype._clearCancellationData=s,v.prototype._propagateFrom=l,v.prototype._onCancel=a,v.prototype._setOnCancel=i,v.prototype._attachCancellationCallback=o,v.prototype._execute=n,ie=l,de.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!de.monitoring?(de.monitoring=!0,v.prototype._fireEvent=Z):!e.monitoring&&de.monitoring&&(de.monitoring=!1,v.prototype._fireEvent=r)),v},v.prototype._fireEvent=r,v.prototype._execute=function(o,t,e){try{o(t,e)}catch(e){return e}},v.prototype._onCancel=function(){},v.prototype._setOnCancel=function(){},v.prototype._attachCancellationCallback=function(){},v.prototype._captureStackTrace=function(){},v.prototype._attachExtraTrace=function(){},v.prototype._clearCancellationData=function(){},v.prototype._propagateFrom=function(){};var ie=function(n,t){0!=(2&t)&&n._isBound()&&this._setBoundTo(n._boundTo)},le=function(){return!1},se=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;U.inherits(S,Error),e.CapturedTrace=S,S.prototype.uncycle=function(){var d=this._length;if(!(2>d)){for(var p=[],e={},n=0,_=this;void 0!==_;++n)p.push(_),_=_._parent;d=this._length=n;for(var g,n=d-1;0<=n;--n)g=p[n].stack,void 0===e[g]&&(e[g]=n);for(var n=0;d>n;++n){var h=p[n].stack,a=e[h];if(void 0!==a&&a!==n){0<a&&(p[a-1]._parent=void 0,p[a-1]._length=1),p[n]._parent=void 0,p[n]._length=1;var s=0<n?p[n-1]:this;d-1>a?(s._parent=p[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,y=n-2;0<=y;--y)p[y]._length=c,c++;return}}}},S.prototype.attachExtraTrace=function(o){if(!o.__stackCleaned__){this.uncycle();for(var t=C(o),e=t.message,n=[t.stack],r=this;void 0!==r;)n.push(b(r.stack.split("\n"))),r=r._parent;f(n),g(n),U.notEnumerableProp(o,"stack",y(e,n)),U.notEnumerableProp(o,"__stackCleaned__",!0)}};var ce=function(){var o=/^\s*at\s*/,t=function(n,t){return"string"==typeof n?n:void 0!==t.name&&void 0!==t.message?t.toString():j(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,Q=o,te=t;var a=Error.captureStackTrace;return le=function(e){return H.test(e)},function(n,t){Error.stackTraceLimit+=6,a(n,t),Error.stackTraceLimit-=6}}var e=new Error;if("string"==typeof e.stack&&0<=e.stack.split("\n")[0].indexOf("stackDetection@"))return Q=/@/,te=t,ne=!0,function(e){e.stack=new Error().stack};var n;try{throw new Error}catch(e){n="stack"in e}return"stack"in e||!n||"number"!=typeof Error.stackTraceLimit?(te=function(n,t){return"string"==typeof n?n:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?j(t):t.toString()},null):(Q=o,te=t,function(n){Error.stackTraceLimit+=6;try{throw new Error}catch(t){n.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(R=function(e){console.warn(e)},U.isNode&&process.stderr.isTTY?R=function(o,t){var e=t?"[33m":"[31m";console.warn(e+o+"[0m\n")}:U.isNode||"string"!=typeof new Error().stack||(R=function(n,t){console.warn("%c"+n,t?"color: darkorange":"color: red")}));var de={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1};return $&&v.longStackTraces(),{longStackTraces:function(){return de.longStackTraces},warnings:function(){return de.warnings},cancellation:function(){return de.cancellation},monitoring:function(){return de.monitoring},propagateFromFunction:function(){return ie},boundValueFunction:function(){return c},checkForgottenReturns:_,setBounds:function(d,t){if(T()){for(var p,e,u,_=d.stack.split("\n"),i=t.stack.split("\n"),o=-1,g=-1,h=0;h<_.length;++h)if(u=F(_[h]),u){p=u.fileName,o=u.line;break}for(var u,h=0;h<i.length;++h)if(u=F(i[h]),u){e=u.fileName,g=u.line;break}0>o||0>g||!p||!e||p!==e||o>=g||(le=function(n){if(H.test(n))return!0;var t=F(n);return!!(t&&t.fileName===p&&o<=t.line&&t.line<=g)})}},warn:d,deprecated:function(o,t){var e=o+" is deprecated and will be removed in a future version.";return t&&(e+=" Use "+t+" instead."),d(e)},CapturedTrace:S,fireDomEvent:ae,fireGlobalEvent:J}}},{"./errors":9,"./util":21}],8:[function(n,t){"use strict";t.exports=function(o){function t(){return this.value}function r(){throw this.reason}o.prototype["return"]=o.prototype.thenReturn=function(e){return e instanceof o&&e.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:e},void 0)},o.prototype["throw"]=o.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},o.prototype.catchThrow=function(n){if(1>=arguments.length)return this._then(void 0,r,void 0,{reason:n},void 0);var t=arguments[1];return this.caught(n,function(){throw t})},o.prototype.catchReturn=function(e){if(1>=arguments.length)return e instanceof o&&e.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:e},void 0);var n=arguments[1];n instanceof o&&n.suppressUnhandledRejections();return this.caught(e,function(){return n})}}},{}],9:[function(n,t){"use strict";function e(o,t){function e(n){return this instanceof e?(u(this,"message","string"==typeof n?n:t),u(this,"name",o),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new e(n)}return l(e,Error),e}function r(e){return this instanceof r?(u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(e)}var i,k,v=n("./es5"),s=v.freeze,c=n("./util"),l=c.inherits,u=c.notEnumerableProp,p=e("Warning","warning"),f=e("CancellationError","cancellation error"),h=e("TimeoutError","timeout error"),_=e("AggregateError","aggregate error");try{i=TypeError,k=RangeError}catch(t){i=e("TypeError","type error"),k=e("RangeError","range error")}for(var d=["join","pop","push","shift","unshift","slice","filter","forEach","some","every","map","indexOf","lastIndexOf","reduce","reduceRight","sort","reverse"],y=0;y<d.length;++y)"function"==typeof Array.prototype[d[y]]&&(_.prototype[d[y]]=Array.prototype[d[y]]);v.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var j=0;_.prototype.toString=function(){var a=Array(4*j+1).join(" "),l="\n"+a+"AggregateError of:\n";j++,a=Array(4*j+1).join(" ");for(var s=0;s<this.length;++s){for(var c=this[s]===this?"[Circular AggregateError]":this[s]+"",d=c.split("\n"),i=0;i<d.length;++i)d[i]=a+d[i];c=d.join("\n"),l+=c+"\n"}return j--,l},l(r,Error);var C=Error.__BluebirdErrorTypes__;C||(C=s({CancellationError:f,TimeoutError:h,OperationalError:r,RejectionError:r,AggregateError:_}),v.defineProperty(Error,"__BluebirdErrorTypes__",{value:C,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:i,RangeError:k,CancellationError:C.CancellationError,OperationalError:C.OperationalError,TimeoutError:C.TimeoutError,AggregateError:C.AggregateError,Warning:p}},{"./es5":10,"./util":21}],10:[function(n,t){var e=function(){"use strict";return void 0===this}();if(e)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:e,propertyIsWritable:function(o,t){var e=Object.getOwnPropertyDescriptor(o,t);return!e||e.writable||e.set}};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,a=function(o){var t=[];for(var e in o)r.call(o,e)&&t.push(e);return t},s=function(n,t){return{value:n[t]}},c=function(o,t,e){return o[t]=e.value,o},l=function(e){return e},d=function(e){try{return Object(e).constructor.prototype}catch(t){return o}},p=function(e){try{return"[object Array]"===i.call(e)}catch(t){return!1}};t.exports={isArray:p,keys:a,names:a,defineProperty:c,getDescriptor:s,freeze:l,getPrototypeOf:d,isES5:e,propertyIsWritable:function(){return!0}}}},{}],11:[function(d,t){"use strict";t.exports=function(t,e,n){function _(o,t,e){this.promise=o,this.type=t,this.handler=e,this.called=!1,this.cancelPromise=null}function r(e){this.finallyHandler=e}function o(n,t){return null!=n.cancelPromise&&(1<arguments.length?n.cancelPromise._reject(t):n.cancelPromise._cancel(),n.cancelPromise=null,!0)}function a(){return c.call(this,this.promise._target()._settledValue())}function s(e){return o(this,e)?void 0:(p.e=e,p)}function c(c){var d=this.promise,i=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?i.call(d._boundValue()):i.call(d._boundValue(),c);if(l===n)return l;if(void 0!==l){d._setReturnedNonUndefined();var g=e(l,d);if(g instanceof t){if(null!=this.cancelPromise){if(g._isCancelled()){var h=new u("late cancellation observer");return d._attachExtraTrace(h),p.e=h,p}g.isPending()&&g._attachCancellationCallback(new r(this))}return g._then(a,s,void 0,this,void 0)}}}return d.isRejected()?(o(this),p.e=c,p):(o(this),c)}var l=d("./util"),u=t.CancellationError,p=l.errorObj,g=d("./catch_filter")(n);return _.prototype.isFinallyHandler=function(){return 0===this.type},r.prototype._resultCancelled=function(){o(this.finallyHandler)},t.prototype._passThrough=function(o,t,e,n){return"function"==typeof o?this._then(e,n,void 0,new _(this,t,o),void 0):this.then()},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,c,c)},t.prototype.tap=function(e){return this._passThrough(e,1,c)},t.prototype.tapCatch=function(e){var d=arguments.length;if(1===d)return this._passThrough(e,1,void 0,c);var n,p=Array(d-1),i=0;for(n=0;d-1>n;++n){var u=arguments[n];if(!l.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+l.classString(u)));p[i++]=u}p.length=i;var a=arguments[n];return this._passThrough(g(p,a,this),1,void 0,c)},_}},{"./catch_filter":5,"./util":21}],12:[function(o,t){"use strict";t.exports=function(t,a){var e=o("./util");e.canEvaluate,e.tryCatch,e.errorObj,t.join=function(){var n,o=arguments.length-1;if(0<o&&"function"==typeof arguments[o]){n=arguments[o];var e}var l=[].slice.call(arguments);n&&l.pop();var e=new a(l).promise();return void 0===n?e:e.spread(n)}}},{"./util":21}],13:[function(l,t){"use strict";t.exports=function(d,e,t,n,_){var o=l("./util"),g=o.tryCatch;d.method=function(n){if("function"!=typeof n)throw new d.TypeError("expecting a function but got "+o.classString(n));return function(){var t=new d(e);t._captureStackTrace(),t._pushContext();var o=g(n).apply(this,arguments),r=t._popContext();return _.checkForgottenReturns(o,r,"Promise.method",t),t._resolveFromSyncValue(o),t}},d.attempt=d["try"]=function(a){if("function"!=typeof a)return n("expecting a function but got "+o.classString(a));var t=new d(e);t._captureStackTrace(),t._pushContext();var r;if(1<arguments.length){_.deprecated("calling Promise.try with more than 1 argument");var i=arguments[1],l=arguments[2];r=o.isArray(i)?g(a).apply(l,i):g(a).call(l,i)}else r=g(a)();var s=t._popContext();return _.checkForgottenReturns(r,s,"Promise.try",t),t._resolveFromSyncValue(r),t},d.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":21}],14:[function(n,t){"use strict";function d(e){return e instanceof Error&&l.getPrototypeOf(e)===Error.prototype}function e(a){var t;if(d(a)){t=new s(a),t.name=a.name,t.message=a.message,t.stack=a.stack;for(var p,u=l.keys(a),n=0;n<u.length;++n)p=u[n],c.test(p)||(t[p]=a[p]);return t}return r.markAsOriginatingFromRejection(a),a}var r=n("./util"),a=r.maybeWrapAsError,o=n("./errors"),s=o.OperationalError,l=n("./es5"),c=/^(?:name|message|stack|cause)$/;t.exports=function(i,l){return function(t,n){if(null!==i){if(t){var r=e(a(t));i._attachExtraTrace(r),i._reject(r)}else if(l){var o=[].slice.call(arguments,1);i._fulfill(o)}else i._fulfill(n);i=null}}}},{"./errors":9,"./es5":10,"./util":21}],15:[function(I,t){"use strict";t.exports=function(){function A(){}function e(n,t){if(null==n||n.constructor!==O)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new _("expecting a function but got "+U.classString(t))}function O(n){n!==y&&e(this,n),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(n),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function n(e){this.promise._resolveCallback(e)}function o(e){this.promise._rejectCallback(e,!1)}function r(n){var t=new O(y);t._fulfillmentHandler0=n,t._rejectionHandler0=n,t._promise0=n,t._receiver0=n}var i,D=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new O.PromiseInspection(this._target())},a=function(e){return O.reject(new _(e))},s={},U=I("./util");i=U.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},U.notEnumerableProp(O,"_getDomain",i);var p=I("./es5"),u=I("./async"),h=new u;p.defineProperty(O,"_async",{value:h});var d=I("./errors"),_=O.TypeError=d.TypeError;O.RangeError=d.RangeError;var g=O.CancellationError=d.CancellationError;O.TimeoutError=d.TimeoutError,O.OperationalError=d.OperationalError,O.RejectionError=d.OperationalError,O.AggregateError=d.AggregateError;var y=function(){},b={},f={},m=I("./thenables")(O,y),v=I("./promise_array")(O,y,m,a,A),k=I("./context")(O),j=(k.create,I("./debuggability")(O,k)),C=(j.CapturedTrace,I("./finally")(O,m,f)),T=I("./catch_filter")(f),E=I("./nodeback"),w=U.errorObj,F=U.tryCatch;return O.prototype.toString=function(){return"[object Promise]"},O.prototype.caught=O.prototype["catch"]=function(l){var s=arguments.length;if(1<s){var e,c=Array(s-1),r=0;for(e=0;s-1>e;++e){var d=arguments[e];if(!U.isObject(d))return a("Catch statement predicate: expecting an object but got "+U.classString(d));c[r++]=d}return c.length=r,l=arguments[e],this.then(void 0,T(c,l,this))}return this.then(void 0,l)},O.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},O.prototype.then=function(o,t){if(j.warnings()&&0<arguments.length&&"function"!=typeof o&&"function"!=typeof t){var e=".then() only accepts functions but was passed: "+U.classString(o);1<arguments.length&&(e+=", "+U.classString(t)),this._warn(e)}return this._then(o,t,void 0,void 0,void 0)},O.prototype.done=function(o,t){var e=this._then(o,t,void 0,void 0,void 0);e._setIsFinal()},O.prototype.spread=function(e){return"function"==typeof e?this.all()._then(e,void 0,void 0,b,void 0):a("expecting a function but got "+U.classString(e))},O.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},O.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new v(this).promise()},O.prototype.error=function(e){return this.caught(U.originatesFromRejection,e)},O.getNewLibraryCopy=t.exports,O.is=function(e){return e instanceof O},O.fromNode=O.fromCallback=function(o){var t=new O(y);t._captureStackTrace();var e=!!(1<arguments.length)&&!!Object(arguments[1]).multiArgs,n=F(o)(E(t,e));return n===w&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},O.all=function(e){return new v(e).promise()},O.cast=function(n){var t=m(n);return t instanceof O||(t=new O(y),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=n),t},O.resolve=O.fulfilled=O.cast,O.reject=O.rejected=function(n){var t=new O(y);return t._captureStackTrace(),t._rejectCallback(n,!0),t},O.setScheduler=function(e){if("function"!=typeof e)throw new _("expecting a function but got "+U.classString(e));return h.setScheduler(e)},O.prototype._then=function(c,t,e,n,b){var o=void 0!==b,a=o?b:new O(y),s=this._target(),l=s._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0==(50397184&l)?s===this?void 0:this._boundTo:this._boundValue()),this._fireEvent("promiseChained",this,a));var u=i();if(0!=(50397184&l)){var p,m,k=s._settlePromiseCtx;0==(33554432&l)?0==(16777216&l)?(k=s._settlePromiseLateCancellationObserver,m=new g("late cancellation observer"),s._attachExtraTrace(m),p=t):(m=s._fulfillmentHandler0,p=t,s._unsetRejectionIsUnhandled()):(m=s._rejectionHandler0,p=c),h.invoke(k,s,{handler:null===u?p:"function"==typeof p&&U.domainBind(u,p),promise:a,receiver:n,value:m})}else s._addCallbacks(c,t,a,n,u);return a},O.prototype._length=function(){return 65535&this._bitField},O.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},O.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},O.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},O.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},O.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},O.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},O.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},O.prototype._isFinal=function(){return 0<(4194304&this._bitField)},O.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},O.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},O.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},O.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},O.prototype._receiverAt=function(n){var t=0===n?this._receiver0:this[4*n-4+3];return t===s?void 0:void 0===t&&this._isBound()?this._boundValue():t},O.prototype._promiseAt=function(e){return this[4*e-4+2]},O.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},O.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},O.prototype._boundValue=function(){},O.prototype._migrateCallback0=function(o){var t=(o._bitField,o._fulfillmentHandler0),e=o._rejectionHandler0,n=o._promise0,r=o._receiverAt(0);void 0===r&&(r=s),this._addCallbacks(t,e,n,r,null)},O.prototype._migrateCallbackAt=function(a,t){var e=a._fulfillmentHandlerAt(t),n=a._rejectionHandlerAt(t),r=a._promiseAt(t),i=a._receiverAt(t);void 0===i&&(i=s),this._addCallbacks(e,n,r,i,null)},O.prototype._addCallbacks=function(l,t,e,n,r){var i=this._length();if(65531<=i&&(i=0,this._setLength(0)),0===i)this._promise0=e,this._receiver0=n,"function"==typeof l&&(this._fulfillmentHandler0=null===r?l:U.domainBind(r,l)),"function"==typeof t&&(this._rejectionHandler0=null===r?t:U.domainBind(r,t));else{var s=4*i-4;this[s+2]=e,this[s+3]=n,"function"==typeof l&&(this[s+0]=null===r?l:U.domainBind(r,l)),"function"==typeof t&&(this[s+1]=null===r?t:U.domainBind(r,t))}return this._setLength(i+1),i},O.prototype._proxy=function(n,t){this._addCallbacks(void 0,void 0,t,n,null)},O.prototype._resolveCallback=function(i,t){if(0==(117506048&this._bitField)){if(i===this)return this._rejectCallback(D(),!1);var e=m(i,this);if(!(e instanceof O))return this._fulfill(i);t&&this._propagateFrom(e,2);var n=e._target();if(n===this)return void this._reject(D());var r=n._bitField;if(0==(50397184&r)){var o=this._length();0<o&&n._migrateCallback0(this);for(var a=1;o>a;++a)n._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&r))this._fulfill(n._value());else if(0!=(16777216&r))this._reject(n._reason());else{var l=new g("late cancellation observer");n._attachExtraTrace(l),this._reject(l)}}},O.prototype._rejectCallback=function(a,t,e){var n=U.ensureErrorObject(a),r=n===a;if(!r&&!e&&j.warnings()){var i="a promise was rejected with a non-error: "+U.classString(a);this._warn(i,!0)}this._attachExtraTrace(n,!!t&&r),this._reject(a)},O.prototype._resolveFromExecutor=function(o){if(o!==y){var a=this;this._captureStackTrace(),this._pushContext();var e=!0,t=this._execute(o,function(e){a._resolveCallback(e)},function(n){a._rejectCallback(n,e)});e=!1,this._popContext(),void 0!==t&&a._rejectCallback(t,!0)}},O.prototype._settlePromiseFromHandler=function(l,t,e,n){var r=n._bitField;if(0==(65536&r)){n._pushContext();var s;t===b?e&&"number"==typeof e.length?s=F(l).apply(this._boundValue(),e):(s=w,s.e=new _("cannot .spread() a non-array: "+U.classString(e))):s=F(l).call(t,e);var c=n._popContext();r=n._bitField,0==(65536&r)&&(s===f?n._reject(e):s===w?n._rejectCallback(s.e,!1):(j.checkForgottenReturns(s,c,"",n,this),n._resolveCallback(s)))}},O.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},O.prototype._followee=function(){return this._rejectionHandler0},O.prototype._setFollowee=function(e){this._rejectionHandler0=e},O.prototype._settlePromise=function(n,t,e,r){var o=n instanceof O,a=this._bitField,i=0!=(134217728&a);0==(65536&a)?"function"==typeof t?o?(i&&n._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,e,r,n)):t.call(e,r,n):e instanceof A?e._isResolved()||(0==(33554432&a)?e._promiseRejected(r,n):e._promiseFulfilled(r,n)):o&&(i&&n._setAsyncGuaranteed(),0==(33554432&a)?n._reject(r):n._fulfill(r)):(o&&n._invokeInternalOnCancel(),e instanceof C&&e.isFinallyHandler()?(e.cancelPromise=n,F(t).call(e,r)===w&&n._reject(w.e)):t===l?n._fulfill(l.call(e)):e instanceof A?e._promiseCancelled(n):o||n instanceof v?n._cancel():e.cancel())},O.prototype._settlePromiseLateCancellationObserver=function(a){var t=a.handler,e=a.promise,n=a.receiver,r=a.value;"function"==typeof t?e instanceof O?this._settlePromiseFromHandler(t,n,r,e):t.call(n,r,e):e instanceof O&&e._reject(r)},O.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},O.prototype._settlePromise0=function(n,t){var e=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(e,n,o,t)},O.prototype._clearCallbackDataAtIndex=function(n){var t=4*n-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},O.prototype._fulfill=function(o){var t=this._bitField;if(!((117506048&t)>>>16)){if(o===this){var e=D();return this._attachExtraTrace(e),this._reject(e)}this._setFulfilled(),this._rejectionHandler0=o,0<(65535&t)&&(0==(134217728&t)?h.settlePromises(this):this._settlePromises())}},O.prototype._reject=function(n){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=n,this._isFinal()?h.fatalError(n,U.isNode):void(0<(65535&t)?h.settlePromises(this):this._ensurePossibleRejectionHandled())},O.prototype._fulfillPromises=function(a,t){for(var e=1;a>e;e++){var l=this._fulfillmentHandlerAt(e),r=this._promiseAt(e),i=this._receiverAt(e);this._clearCallbackDataAtIndex(e),this._settlePromise(r,l,i,t)}},O.prototype._rejectPromises=function(a,t){for(var e=1;a>e;e++){var l=this._rejectionHandlerAt(e),r=this._promiseAt(e),i=this._receiverAt(e);this._clearCallbackDataAtIndex(e),this._settlePromise(r,l,i,t)}},O.prototype._settlePromises=function(){var o=this._bitField,t=65535&o;if(0<t){if(0!=(16842752&o)){var e=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,e,o),this._rejectPromises(t,e)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,o),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},O.prototype._settledValue=function(){var e=this._bitField;return 0==(33554432&e)?0==(16777216&e)?void 0:this._fulfillmentHandler0:this._rejectionHandler0},O.defer=O.pending=function(){j.deprecated("Promise.defer","new Promise");var e=new O(y);return{promise:e,resolve:n,reject:o}},U.notEnumerableProp(O,"_makeSelfResolutionError",D),I("./method")(O,y,m,a,j),I("./bind")(O,y,m,j),I("./cancel")(O,v,a,j),I("./direct_resolve")(O),I("./synchronous_inspection")(O),I("./join")(O,v,m,y,h,i),O.Promise=O,O.version="3.5.0",U.toFastProperties(O),U.toFastProperties(O.prototype),r({a:1}),r({b:2}),r({c:3}),r(1),r(function(){}),r(void 0),r(!1),r(new O(y)),j.setBounds(u.firstLineError,U.lastLineError),O}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21}],16:[function(l,t){"use strict";t.exports=function(d,e,p,t,n){function r(e){return-2===e?[]:-3===e?{}:-6===e?new Map:void 0}function o(n){var t=this._promise=new d(e);n instanceof d&&t._propagateFrom(n,3),t._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=l("./util");return a.isArray,a.inherits(o,n),o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function e(i,l){var n=p(this._values,this._promise);if(n instanceof d){n=n._target();var c=n._bitField;if(this._values=n,0==(50397184&c))return this._promise._setAsyncGuaranteed(),n._then(e,this._reject,void 0,this,l);if(0==(33554432&c))return 0==(16777216&c)?this._cancel():this._reject(n._reason());n=n._value()}if(n=a.asArray(n),null===n){var s=t("expecting an array or an iterable object but got "+a.classString(n)).reason();return void this._promise._rejectCallback(s,!1)}return 0===n.length?void(-5===l?this._resolveEmptyArray():this._resolve(r(l))):void this._iterate(n)},o.prototype._iterate=function(e){var t=this.getActualLength(e.length);this._length=t,this._values=this.shouldCopyValues()?Array(t):this._values;for(var n,r=this._promise,i=!1,l=null,u=0;t>u;++u)n=p(e[u],r),n instanceof d?(n=n._target(),l=n._bitField):l=null,i?null!==l&&n.suppressUnhandledRejections():null===l?i=this._promiseFulfilled(n,u):0==(50397184&l)?(n._proxy(this,u),this._values[u]=n):i=0==(33554432&l)?0==(16777216&l)?this._promiseCancelled(u):this._promiseRejected(n._reason(),u):this._promiseFulfilled(n._value(),u);i||r._setAsyncGuaranteed()},o.prototype._isResolved=function(){return null===this._values},o.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},o.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},o.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},o.prototype._promiseFulfilled=function(o,t){this._values[t]=o;var e=++this._totalResolved;return!!(e>=this._length)&&(this._resolve(this._values),!0)},o.prototype._promiseCancelled=function(){return this._cancel(),!0},o.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},o.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof d)e.cancel();else for(var t=0;t<e.length;++t)e[t]instanceof d&&e[t].cancel()}},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(e){return e},o}},{"./util":21}],17:[function(n,t){"use strict";function o(a,t,e,n,r){for(var i=0;r>i;++i)e[i+n]=a[i+t],a[i+t]=void 0}function e(e){this._capacity=e,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(e){return this._capacity<e},e.prototype._pushOne=function(o){var t=this.length();this._checkCapacity(t+1);var e=this._front+t&this._capacity-1;this[e]=o,this._length=t+1},e.prototype.push=function(a,t,e){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(a),this._pushOne(t),void this._pushOne(e);var r=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[r+0&i]=a,this[r+1&i]=t,this[r+2&i]=e,this._length=n},e.prototype.shift=function(){var n=this._front,t=this[n];return this[n]=void 0,this._front=n+1&this._capacity-1,this._length--,t},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(r){var t=this._capacity;this._capacity=r;var e=this._front,n=this._length;o(this,0,this,t,e+n&t-1)},t.exports=e},{}],18:[function(n,t){"use strict";var e,o=n("./util"),i=o.getNativePromise();if(o.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,s=process.nextTick;e=o.isRecentNode?function(e){a.call(global,e)}:function(e){s.call(process,e)}}else if("function"==typeof i&&"function"==typeof i.resolve){var c=i.resolve();e=function(e){c.then(e)}}else e="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"==typeof setImmediate?"undefined"==typeof setTimeout?function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(e){setTimeout(e,0)}:function(e){setImmediate(e)}:function(){var a=document.createElement("div"),t={attributes:!0},e=!1,l=document.createElement("div"),r=new MutationObserver(function(){a.classList.toggle("foo"),e=!1});r.observe(l,t);var i=function(){e||(e=!0,l.classList.toggle("foo"))};return function(e){var n=new MutationObserver(function(){n.disconnect(),e()});n.observe(a,t),i()}}();t.exports=e},{"./util":21}],19:[function(n,t){"use strict";t.exports=function(l){function t(e){void 0===e?(this._bitField=0,this._settledValueField=void 0):(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0)}t.prototype._settledValue=function(){return this._settledValueField};var e=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},l.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},l.prototype._isCancelled=function(){return this._target().__isCancelled()},l.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},l.prototype.isPending=function(){return o.call(this._target())},l.prototype.isRejected=function(){return i.call(this._target())},l.prototype.isFulfilled=function(){return r.call(this._target())},l.prototype.isResolved=function(){return a.call(this._target())},l.prototype.value=function(){return e.call(this._target())},l.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},l.prototype._value=function(){return this._settledValue()},l.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},l.PromiseInspection=t}},{}],20:[function(d,t){"use strict";t.exports=function(_,e){function t(n,t){if(l(n)){if(n instanceof _)return n;var r=g(n);if(r===y){t&&t._pushContext();var i=_.reject(r.e);return t&&t._popContext(),i}if("function"==typeof r){if(o(n)){var i=new _(e);return n._then(i._fulfill,i._reject,void 0,i,null),i}return a(n,r,t)}}return n}function n(e){return e.then}function g(e){try{return n(e)}catch(t){return y.e=t,y}}function o(e){try{return r.call(e,"_promise0")}catch(t){return!1}}function a(n,t,r){function i(e){a&&(a._resolveCallback(e),a=null)}function o(e){a&&(a._rejectCallback(e,c,!0),a=null)}var a=new _(e),l=a;r&&r._pushContext(),a._captureStackTrace(),r&&r._popContext();var c=!0,d=h.tryCatch(t).call(n,i,o);return c=!1,a&&d===y&&(a._rejectCallback(d.e,!0,!0),a=null),l}var h=d("./util"),y=h.errorObj,l=h.isObject,r={}.hasOwnProperty;return t}},{"./util":21}],21:[function(n,t){"use strict";function e(){try{var e=c;return c=null,e.apply(this,arguments)}catch(t){return u.e=t,u}}function r(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function o(o,t,e){if(r(o))return o;return d.defineProperty(o,t,{value:e,configurable:!0,enumerable:!1,writable:!0}),o}function a(e){try{return e+""}catch(t){return"[no string representation]"}}function i(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function l(e){return i(e)&&d.propertyIsWritable(e,"stack")}function s(e){return{}.toString.call(e)}var c,d=n("./es5"),p="undefined"==typeof navigator,u={e:{}},_="undefined"==typeof self?"undefined"==typeof window?"undefined"==typeof global?void 0===this?null:this:global:window:self,g=function(){var i=[Array.prototype,Object.prototype,Function.prototype],p=function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return!0;return!1};if(d.isES5){var e=Object.getOwnPropertyNames;return function(n){for(var u=[],r=Object.create(null);null!=n&&!p(n);){var a;try{a=e(n)}catch(e){return u}for(var i,_=0;_<a.length;++_)if(i=a[_],!r[i]){r[i]=!0;var g=Object.getOwnPropertyDescriptor(n,i);null!=g&&null==g.get&&null==g.set&&u.push(i)}n=d.getPrototypeOf(n)}return u}}var t={}.hasOwnProperty;return function(e){if(p(e))return[];var n=[];t:for(var r in e)if(t.call(e,r))n.push(r);else{for(var o=0;o<i.length;++o)if(t.call(i[o],r))continue t;n.push(r)}return n}}(),h=/this\s*\.\s*\S+\s*=/,y=/^[a-z$_][a-z$_0-9]*$/i,b=function(){return"stack"in new Error?function(e){return l(e)?e:new Error(a(e))}:function(e){if(l(e))return e;try{throw new Error(a(e))}catch(t){return t}}}(),f=function(e){return d.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var m="function"==typeof Array.from?function(e){return Array.from(e)}:function(o){for(var t,a=[],n=o[Symbol.iterator]();!(t=n.next()).done;)a.push(t.value);return a};f=function(e){return d.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?m(e):null}}var k="undefined"!=typeof process&&"[object process]"===s(process).toLowerCase(),v="undefined"!=typeof process&&"undefined"!=typeof process.env,j={isClass:function(o){try{if("function"==typeof o){var t=d.names(o.prototype),e=d.isES5&&1<t.length,n=0<t.length&&(1!==t.length||"constructor"!==t[0]),r=h.test(o+"")&&0<d.names(o).length;if(e||n||r)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return y.test(e)},inheritedDataKeys:g,getDataPropertyOrDefault:function(o,t,e){if(!d.isES5)return{}.hasOwnProperty.call(o,t)?o[t]:void 0;var n=Object.getOwnPropertyDescriptor(o,t);return null==n?void 0:null==n.get&&null==n.set?n.value:e},thrower:function(e){throw e},isArray:d.isArray,asArray:f,notEnumerableProp:o,isPrimitive:r,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:i,canEvaluate:p,errorObj:u,tryCatch:function(n){return c=n,e},inherits:function(o,t){function e(){for(var e in this.constructor=o,this.constructor$=t,t.prototype)a.call(t.prototype,e)&&"$"!==e.charAt(e.length-1)&&(this[e+"$"]=t.prototype[e])}var a={}.hasOwnProperty;return e.prototype=t.prototype,o.prototype=new e,o.prototype},withAppended:function(o,t){var e,a=o.length,r=Array(a+1);for(e=0;a>e;++e)r[e]=o[e];return r[e]=t,r},maybeWrapAsError:function(e){return r(e)?new Error(a(e)):e},toFastProperties:function(o){function t(){}t.prototype=o;for(var e=8;e--;)new t;return o},filledRange:function(o,t,e){for(var n=Array(o),r=0;o>r;++r)n[r]=t+r+e;return n},toString:a,canAttachTrace:l,ensureErrorObject:b,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{o(e,"isOperational",!0)}catch(t){}},classString:s,copyDescriptors:function(a,t,e){for(var n,l=d.names(a),r=0;r<l.length;++r)if(n=l[r],e(n))try{d.defineProperty(t,n,d.getDescriptor(a,n))}catch(e){}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:k,hasEnvVariables:v,env:function(e){return v?process.env[e]:void 0},global:_,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(t){}},domainBind:function(n,t){return n.bind(t)}};j.isRecentNode=j.isNode&&function(){var e=process.versions.node.split(".").map(Number);return 0===e[0]&&10<e[1]||0<e[0]}(),j.isNode&&j.toFastProperties(process);try{throw new Error}catch(e){j.lastLineError=e}t.exports=j},{"./es5":10}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),function(e,t){"function"==typeof define&&define.amd?define("lib/chrome-promise",[],t.bind(null,"object"==typeof exports?this:e)):"object"==typeof exports?module.exports=t(this):e.ChromePromise=t(e)}(this,function(e){'use strict';function t(r){function a(e,t){return function(){var o=n.call(arguments);return new s(function(r,a){o.push(function(){var e=c.lastError,t=n.call(arguments);if(e)a(e);else switch(t.length){case 0:r();break;case 1:r(t[0]);break;default:r(t);}}),e.apply(t,o)})}}function i(e,n){for(var r in e)if(o.call(e,r)){var l=e[r],s=typeof l;"object"!==s||l instanceof t?"function"===s?n[r]=a(l,e):n[r]=l:(n[r]={},i(l,n[r]))}}r=r||{};var l=r.chrome||e.chrome,s=r.Promise||e.Promise,c=l.runtime;i(l,this)}var n=Array.prototype.slice,o=Object.prototype.hasOwnProperty;return t}),define("shared",[],function(){const e=chrome.extension.getBackgroundPage(),t=e.shared||(e.shared={});return function(e,n){return t[e]||(t[e]="function"==typeof n?n():n)}}),define("cp",["lib/chrome-promise","shared","bluebird"],function(e,t,n){return t("cp",function(){return new e({Promise:n})})}),define("background/constants",["shared"],function(e){const t=/Mac/i.test(navigator.platform),n=/Edg\//i.test(navigator.userAgent),o=_wrapRegExp(/^([-a-z]+)-([a-z]+)$/i,{lang:1,locale:2}),r=navigator.languages[0],a=r.match(o);return e("k",()=>({IsMac:t,Platform:t?"mac":"win",Language:a&&a.groups.lang||r,IsDev:!1,IsEdge:n,IncognitoNameUC:n?"InPrivate":"Incognito",IncognitoNameLC:n?"InPrivate":"incognito",SpaceBehavior:{Key:"spaceBehavior",Select:"select",Space:"space"},EscBehavior:{Key:"escBehavior",Clear:"clear",Close:"close"},HomeEndBehavior:{Key:"homeEndBehavior",ResultsList:"resultsList",SearchBox:"searchBox"},MarkTabsInOtherWindows:{Key:"markTabsInOtherWindows"},IncludeClosedTabs:{Key:"includeClosedTabs"},ShowTabCount:{Key:"showTabCount"},UsePinyin:{Key:"usePinyin"},RestoreLastQuery:{Key:"restoreLastQuery"},ShowBookmarkPaths:{Key:"showBookmarkPaths"},Shortcuts:{Key:"shortcuts",MRUSelect:"mruSelect",CloseTab:"closeTab",MoveTabLeft:"moveTabLeft",MoveTabRight:"moveTabRight",CopyURL:"copyURL",CopyTitleURL:"copyTitleURL"}}))}),define("lib/objects-have-same-keys",[],()=>function e(t,n,o){const r=Object.keys(t).sort(),a=Object.keys(n).sort();return!(r.join()!==a.join())&&r.every(r=>{const a=t[r],i=n[r],l=typeof a;return l===typeof i&&("object"!=l||!a&&!i||Array.isArray(a)&&Array.isArray(i)||a&&i&&(!o||e(a,i,o))||!1)})}),define("lib/decode",[],function(){return function(e){let t=e;try{t=decodeURIComponent(e)}catch(n){try{t=unescape(e)}catch(t){}}return t}}),define("background/mutex",[],function(){function e(e){this._locked=!1,this._queue=[],this._promiseConstructor=e||Promise}return Object.assign(e.prototype,{lock:function(e){return new this._promiseConstructor(function(t,n){this._queue.push([e,t,n]),this._locked||this._dequeue()}.bind(this))},_dequeue:function(){var e=this._queue.shift();e?(this._locked=!0,this._execute(e)):this._locked=!1},_execute:function(e){var t=e[0],n=e[1],o=e[2];t().then(n,o).then(function(){this._dequeue()}.bind(this))}}),e}),define("background/tracker",[],function(){function e({id:e,name:t="t0",createFields:r={},settings:a={},sendPageview:i=!0}){if(!e||"string"!=typeof e)throw new Error("A Universal Analytics tracker ID is required.");this.name=t,this.enable(),this.ga("create",e,Object.assign({name:t},r)),o.location&&"chrome-extension:"==o.location.protocol&&this.set("checkProtocolTask",null),this.set(a),i&&this.pageview(),setTimeout(()=>{o.ga.answer||this.disable(!0)},n)}const t=/chrome-extension:\/\/[^\n]+\//g,n=30000,o="object"==typeof window?window:{};if("function"!=typeof o.ga){function e(...t){e.q.push(t)}e.q=[],e.l=Date.now(),o.ga=e,o.GoogleAnalyticsObject="ga"}return Object.assign(e.prototype,{enable:function(){this.enabled=!0},disable:function(e){this.enabled=!1,e&&!o.ga.answer&&(o.ga.q.length=0)},ga:function(e,...t){const n="create"==e?e:`${this.name}.${e}`;this.enabled&&o.ga(n,...t)},send:function(...e){this.ga("send",...e)},set:function(e,t){e&&"object"==typeof e?Object.keys(e).forEach(t=>this.ga("set",t,e[t])):this.ga("set",e,t)},event:function(e,t,n){const o={hitType:"event",eventCategory:e,eventAction:t};"string"==typeof n?o.eventLabel=n:"number"==typeof n&&(o.eventValue=n),this.send(o)},pageview:function(e){e?this.send("pageview",e):this.send("pageview")},timing:function(e,t,n){this.send("timing",e,t,Math.round(n))},exception:function(e,n){let o;try{if(!e)o="Generic error";else if("string"==typeof e)o=e;else if(e.stack)o=e.stack.replace(t,"").slice(0,2e3);else if(e.message){const t=e.lineno?`\n${e.lineno}, ${e.colno}: ${e.filename}`:"";o=`${e.message}${t}`}this.send("exception",{exDescription:o,exFatal:!!n})}catch(t){console.error("Calling tracker.exception() failed.",t)}}}),e}),define("background/page-trackers",["shared","./tracker","./constants"],function(e,t,{IsEdge:n}){const o=`UA-108153491-${n?"4":"3"}`;return e("trackers",function(){return{background:new t({id:o,name:"background",settings:{location:"/background.html",page:"/background",transport:"beacon"},sendPageview:!1}),popup:new t({id:o,name:"popup",settings:{location:"/popup.html",page:"/popup",transport:"beacon"},sendPageview:!1}),options:new t({id:o,name:"options",settings:{location:"/options.html",page:"/options",transport:"beacon"},sendPageview:!1})}})}),define("background/storage",["bluebird","cp","./mutex","./page-trackers"],function(e,t,n,o){function r(){return e.resolve({})}function a(){return!0}function i(e){return e}return function({version:l=1,getDefaultData:s=r,validateUpdate:c=a,updaters:d={}}){async function p(e){let t=!1,n=d[e.version];for(;n;){const[t,o]=await n(e.data,e.version);e.data=t,e.version=o,n=d[e.version]}if(e.version===l&&(t=await c(e.data)),t)return u(e.data);else{const t=e.version===l?"failed-validation":"failed-update";return DEBUG&&console.error(`Storage error: ${t}`,e),o.background.event("storage",t),g()}}function u(e){return t.storage.local.set({version:l,data:e}).return(e)}function _(e){return t.storage.local.set({data:e}).return(e)}function g(){return t.storage.local.clear().then(s).then(u).then(t=>b=e.resolve(t))}function h(t,n,o){return y.lock(()=>b.then(r=>e.resolve(t.call(n,r)).then(e=>o&&e?(Object.assign(r,e),_(r)):e)))}const y=new n(e);let b=function(){return t.storage.local.get(null).then(e=>e&&e.data?p(e):g())}();return{get version(){return l},get:function(e,t){return h(e||i,t,!1)},set:function(e,t){return h(e,t,!0)},reset:function(){return y.lock(g)}}}}),define("background/get-default-settings",["./constants"],function(e){const t={[e.Shortcuts.MRUSelect]:"w",[e.Shortcuts.CloseTab]:"ctrl+w",[e.Shortcuts.MoveTabLeft]:"ctrl+[",[e.Shortcuts.MoveTabRight]:"ctrl+]",[e.Shortcuts.CopyURL]:"mod+c",[e.Shortcuts.CopyTitleURL]:"mod+shift+c"},n=Object.assign({},t,{[e.Shortcuts.CloseTab]:"cmd+ctrl+w"}),o={[e.SpaceBehavior.Key]:e.SpaceBehavior.Select,[e.EscBehavior.Key]:e.EscBehavior.Clear,[e.HomeEndBehavior.Key]:e.HomeEndBehavior.ResultsList,[e.MarkTabsInOtherWindows.Key]:!0,[e.IncludeClosedTabs.Key]:!0,[e.ShowTabCount.Key]:!1,[e.UsePinyin.Key]:!1,[e.RestoreLastQuery.Key]:!1,[e.ShowBookmarkPaths.Key]:!0,[e.Shortcuts.Key]:{mac:n,win:t}};return function(){return JSON.parse(JSON.stringify(o))}}),define("background/quickey-storage",["cp","shared","lib/objects-have-same-keys","lib/decode","./storage","./get-default-settings","./constants"],function(e,t,n,o,r,a,i){return t("quickeyStorage",()=>{function t(e){return parseInt(e)+1}function l(e){return async(n,o)=>(await e(n,o),7<=o&&!Number.isInteger(n.lastSeenOptionsVersion)&&(n.lastSeenOptionsVersion=7),[n,t(o)])}function s(...e){return async t=>{const n=(await u).settings;e.forEach(e=>{const{Key:o}=e,r=n[o];if("undefined"==typeof r)throw new Error(`addDefaultSetting(): no default value for "${e}"`);else t.settings[o]=r})}}const c={3:l(e=>{e.installTime=Date.now(),delete e.switchFromShortcut,delete e.lastShortcutTabID}),4:l(async e=>{e.settings=(await u).settings}),5:l(async e=>{await s(i.IncludeClosedTabs)(e),e.lastUsedVersion=""}),6:l(s(i.MarkTabsInOtherWindows)),7:l(s(i.ShowTabCount)),8:l(s(i.UsePinyin)),9:l(async e=>{await s(i.RestoreLastQuery,i.ShowBookmarkPaths,i.HomeEndBehavior)(e),e.lastQuery=""})},d=t(Object.keys(c).sort((e,t)=>e-t).pop()),p=a(),u=Promise.all([e.windows.getAll(),e.tabs.query({})]).then(([e,t])=>{let n;try{n=/[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FEF\uF900-\uFA6D\uFA70-\uFAD9\u{20000}-\u{2A6D6}\u{2A700}-\u{2B734}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}]/u}catch(t){}if(0==i.Language.indexOf("zh"))p[i.UsePinyin.Key]=!0;else if(n)for(let e=0,r=t.length;e<r;e++){const{title:r,url:a}=t[e];if(n.test(r)||n.test(o(a))){p[i.UsePinyin.Key]=!0;break}}return p[i.MarkTabsInOtherWindows.Key]=4>e.length,{installTime:Date.now(),lastShortcutTime:0,lastStartupTime:0,lastUpdateTime:0,lastUsedVersion:"",lastSeenOptionsVersion:d,lastQuery:"",previousTabIndex:-1,settings:p,tabIDs:[],tabsByID:{}}});return r({version:d,updaters:c,getDefaultData:async function(){const t=await e.tabs.query({active:!0,currentWindow:!0,windowType:"normal"}),n=t&&t[0],o=JSON.parse(JSON.stringify((await u)));return n&&(n.lastVisit=Date.now(),o.tabIDs.push(n.id),o.tabsByID[n.id]=n),o},validateUpdate:async function(e){const t=await u;return n(t,e,!1)&&n(t.settings,e.settings,!0)}})})}),define("background/get-chrome-shortcuts",["cp"],function(e){const t={"Left Arrow":"ArrowLeft","Right Arrow":"ArrowRight","Up Arrow":"ArrowUp","Down Arrow":"ArrowDown","Page Up":"PageUp","Page Down":"PageDown",Ins:"Insert",Del:"Delete",Comma:",",Period:".","Media Previous Track":"MediaTrackPrevious","Media Next Track":"MediaTrackNext","Media Play/Pause":"MediaPlayPause","Media Stop":"MediaStop"},n="+",o=/([\u2303\u21E7\u2325\u2318]+)(.+)/;return t["←"]="ArrowLeft",t["→"]="ArrowRight",t["↑"]="ArrowUp",t["↓"]="ArrowDown",t["⌃"]="Ctrl",t["⇧"]="Shift",t["⌥"]="Opt",t["⌘"]="Cmd",function(){return e.commands.getAll().then(e=>e.map(e=>{const r=e.shortcut||"";let a;if(-1<r.indexOf("Media"))a=[r];else if(!r.includes(n)){const e=r.match(o);a=e&&3==e.length?e[1].split("").concat(e[2]):[""]}else a=r.split(n);const i=a.map(e=>t[e]||e).join(n).toLowerCase();return{label:e.description||"Open the QuicKey menu",id:e.name,shortcut:i}}))}}),define("options/key-constants",["background/constants"],function({IsMac:e}){return{KeyOrder:{ctrl:0,control:0,mod:e?3:0,alt:1,opt:1,meta:e?1:-1,shift:2,cmd:3,char:4},ModifierAliases:{alt:e?"opt":"alt",mod:e?"cmd":"ctrl",control:"ctrl",meta:e?"cmd":""},ModifierEventNames:{alt:"Alt",opt:"Alt",ctrl:"Control",cmd:"Meta"},ModKeyBoolean:e?"metaKey":"ctrlKey",ShortcutSeparator:"+",FunctionKeyPattern:/^F\d{1,2}$/i}}),define("options/are-shortcuts-identical",["./key-constants"],function({ModifierAliases:e,ShortcutSeparator:t}){function n(n){const o=(n+"").split(t).map(function(t){const n=t.toLowerCase();return e[n]||n}),r=o.slice(0,-1),a=o.slice(-1);return{modifiers:r.sort(),baseKey:a.pop()}}return function(e,t){const o=n(e),r=n(t);return o.modifiers.join("")==r.modifiers.join("")&&o.baseKey==r.baseKey}}),define("background/settings",["bluebird","./quickey-storage","./get-default-settings","./get-chrome-shortcuts","options/key-constants","options/are-shortcuts-identical","./constants"],function(e,t,n,o,r,a,{IsMac:i,Platform:l}){function s(e){const t=Object.assign({},e.settings);return t.shortcuts=t.shortcuts[l],t}function c(e){const t=s(e);return o().then(e=>{const n=e.filter(({id:e})=>"_execute_browser_action"==e)[0].shortcut||"",o=n.split("+"),a=o.slice(0,-1).filter(e=>"shift"!=e.toLowerCase());return a.length||(a[0]=d),t.chrome={popup:{key:o.pop(),modifiers:a,modifierEventName:r.ModifierEventNames[a[0]]},shortcuts:e},t})}const d=i?"ctrl":"alt";return{get:function(e){return e&&"object"==typeof e?c(e):t.get().then(c)},getDefaults:function(){const e=s({settings:n()}),t=[d];return e.chrome={popup:{key:"",modifiers:t,modifierEventName:r.ModifierEventNames[t[0]]},shortcuts:[]},e},set:function(e,n){return t.set(({settings:t})=>{const o=t.shortcuts[l];return e in t?t[e]=n:(o[e]=n,Object.keys(o).forEach(t=>{t!==e&&a(o[t],n)&&(o[t]="")})),{settings:t}}).then(c)},resetShortcuts:function(){return t.set(({settings:e})=>(e.shortcuts[l]=n().shortcuts[l],{settings:e})).then(c)}}}),define("popup/data/add-urls",["lib/decode"],function(e){const t=/^chrome-extension:\/\/[^/]+\/suspended\.html#(?:.*&)?uri=(.+)$/,n=/^((chrome-extension:\/\/[^/]+\/suspended\.html#(?:.*&)?uri=)?(https?|file|chrome):\/\/(www\.)?)|(chrome-extension:\/\/[^/]+\/)/,o="chrome://favicon/";return function(r,a){let{url:i,favIconUrl:l}=r;const s=i.replace(t,"$1");return a?(r.url=s,r.originalURL=i,r.faviconURL=o+s):(i!=s&&(r.unsuspendURL=s),r.faviconURL=l&&0!=l.indexOf("chrome-extension://klbibkeccnjlkjkiokjodocebajanakg/img/")?l:o+(r.unsuspendURL||i)),r.displayURL=e(i.replace(/\+/g,"%20")).replace(n,""),r.recentBoost=isNaN(r.recentBoost)?1:r.recentBoost,r}}),define("background/recent-tabs",["bluebird","cp","shared","popup/data/add-urls","./quickey-storage","./page-trackers"],function(e,t,n,o,r,a){function i(e,t){return e?(e.title||e.url).slice(0,t||75):"NO TAB"}function l(e,t){let n=0,o=-1;do o=e.indexOf(t,n),-1<o&&(e.splice(o,1),n=o);while(-1<o);return e}function s(e){return e[e.length-1]}function c(e,t){const n=g.reduce((t,n)=>(t[n]=e[n],t),{});return n.lastVisit=t&&t.lastVisit||0,n}function d(e){e.lastVisit=Date.now()}function p(e,t){DEBUG&&console.log("=== updateFromFreshTabs",e,t);const{tabIDs:n,tabsByID:r}=e,i={},l={},s=[],d=a.background;let p=0;DEBUG&&console.log("=== existing tabs",n.length,Object.keys(r).length,"fresh",t.length),t.forEach(e=>{o(e),i[e.url]=e,e.unsuspendURL&&(i[e.unsuspendURL]=e)}),n.forEach(e=>{const t=r[e];let n=i[t&&t.url];n?(n=c(n,t),l[n.id]=n,s.push(n.id),delete i[t.url]):(p++,DEBUG&&console.log("=== missing",e,t&&t.lastVisit,t&&t.url))}),DEBUG&&console.log("=== newTabIDs",s.length),d.timing("update","old-recents",n.length),d.timing("update","new-tabs",t.length),d.timing("update","missing-recents",p);var u={tabIDs:s,tabsByID:l,lastUpdateTime:Date.now()};return DEBUG&&console.log("updateFromFreshTabs result",u),u}function u(n){function o(r){const{tabIDs:s,tabsByID:c}=r,d=s.length,p=d-1;let u;a-r.lastShortcutTime<_&&-1<r.previousTabIndex?-1==n?u=(r.previousTabIndex-1+d)%d:u=Math.min(r.previousTabIndex+1,p):-1==n&&(u=p-1);const g=s[u];return g?(DEBUG&&console.log("navigate previousTabIndex",g,u,s.slice(-5),i(c[g])),l.previousTabIndex=u,e.resolve().then(()=>t.windows.update(c[g].windowId,{focused:!0})).then(()=>t.tabs.update(g,{active:!0})).catch(e=>(s.splice(u,1),delete c[g],r.previousTabIndex=u,l.tabIDs=s,l.tabsByID=c,DEBUG&&console.error(e),o(r))).return(l)):l}const a=Date.now(),l={lastShortcutTime:a,previousTabIndex:-1};return r.set(o,"navigate")}const _=750,g=["id","url","windowId"];return n("recentTabs",{add:function(t,n){return t?r.set(({tabIDs:e,tabsByID:o})=>{const{id:r}=t,a=s(e),p=o[a];let u;return p&&p.url==t.url&&p.id==t.id&&p.windowId==t.windowId?(d(p),{tabsByID:o}):(u=c(t,o[r]),d(u),o[r]=u,l(e,r),n?(e.splice(-1,0,r),p&&(p.lastVisit=u.lastVisit+1)):e.push(r),DEBUG&&console.log("add",`${t.id}|${t.windowId}`,e.slice(-5),i(t)),e.splice(0,Math.max(e.length-50,0)).forEach(e=>{delete o[e]}),{tabIDs:e,tabsByID:o})},"addTab"):e.resolve()},remove:function(e){return isNaN(e)?void 0:r.set(({tabIDs:t,tabsByID:n})=>{const o=t.indexOf(e);return-1<o&&(DEBUG&&console.log("tab closed",e,i(n[e])),t.splice(o,1)),delete n[e],{tabIDs:t,tabsByID:n}},"removeTab")},replace:function(e,t){return r.set(({tabIDs:n,tabsByID:o})=>{const r=n.indexOf(e),a=o[e],l={};return a&&(delete o[e],l.tabsByID=o),-1<r&&(DEBUG&&console.log("tab replaced",e,i(a)),n[r]=t,o[t]=a,o[t].id=t,l.tabIDs=n,l.tabsByID=o),l},"replaceTab")},getAll:function(n){return r.get(a=>e.all([t.tabs.query({}),n?t.sessions.getRecentlyClosed():[]]).spread((e,t)=>{const{tabIDs:n,lastUpdateTime:i,lastStartupTime:l}=a,s={};let d,{tabsByID:u}=a,_={tabsByID:u};if((isNaN(i)||l>i)&&(DEBUG&&console.log("====== calling updateFromFreshTabs"),_=p(a,e),u=_.tabsByID),d=e.map(e=>{const{id:t,url:n}=o(e),r=u[t];let a=0;return r&&(u[t]=c(e,r),a=u[t].lastVisit),e.lastVisit=a,s[n]=!0,e.unsuspendURL&&(s[e.unsuspendURL]=!0),e}),1<n.length){const e=[];t.forEach(t=>{const n=1e3*t.lastModified;[].concat(t.tab||t.window.tabs).forEach(t=>{t.url in s||(s[t.url]=!0,t.lastVisit=n,o(t),e.push(t))})}),d=d.concat(e)}return r.set(()=>_),d}))},updateAll:function(){return r.set(e=>t.tabs.query({}).then(t=>(DEBUG&&console.log("=== updateAll"),p(e,t))),"updateAll")},navigate:u,toggle:function(){return r.set(()=>({lastShortcutTime:0,previousTabIndex:-1}),"toggle").then(()=>u(-1))},print:function(n=20){t.storage.local.get(null).then(({data:o})=>{const{tabsByID:r,tabIDs:a}=o;e.all(a.slice(-n).reverse().map(e=>t.tabs.get(e).catch(()=>e))).then(e=>e.forEach(e=>{isNaN(e)?console.log("%c   ",`font-size: 14px; background: url(${e.favIconUrl}) top center / contain no-repeat`,`${e.id}|${e.windowId}: ${r[e.id].lastVisit}: ${i(e)}`):console.log("MISSING",e)}))})}})}),define("common/base",["lodash","bluebird","cp","shared","background/constants","background/quickey-storage","background/settings","background/recent-tabs","background/page-trackers"],()=>{});
